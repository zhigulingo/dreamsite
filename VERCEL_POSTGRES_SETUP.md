# üöÄ –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Vercel + Neon Postgres

## ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞!

–ö–æ–≥–¥–∞ –≤—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏ Neon –≤ Vercel, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `POSTGRES_URL`
- `POSTGRES_PRISMA_URL`
- `POSTGRES_URL_NON_POOLING`

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ! üéâ

---

## üìã –û—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

### 1. Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–∞–∂–¥–æ–π –ø–æ–¥–ø–∏—Å–∫–µ:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
# –ü–æ–ª—É—á–∏—Ç–µ Chat ID —á–µ—Ä–µ–∑ @userinfobot
# –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

vercel env add TELEGRAM_BOT_TOKEN
# –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

vercel env add TELEGRAM_CHAT_ID
# –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à Chat ID

# –í—ã–±–µ—Ä–∏—Ç–µ: Production, Preview, Development
```

### 2. API –∫–ª—é—á –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–¥–ø–∏—Å–æ–∫

–î–ª—è –∑–∞—â–∏—Ç—ã endpoint `/api/subscriptions`:

```bash
vercel env add ADMIN_API_KEY
# –ü—Ä–∏–¥—É–º–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–π –∫–ª—é—á (–Ω–∞–ø—Ä–∏–º–µ—Ä: dreamstalk_2024_secret_xyz123)
# –í—ã–±–µ—Ä–∏—Ç–µ: Production, Preview, Development
```

---

## üöÄ –î–µ–ø–ª–æ–π

```bash
# –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
vercel --prod
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ! –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –¢–µ—Å—Ç –ø–æ–¥–ø–∏—Å–∫–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Å–∞–π—Ç –Ω–∞ Vercel
2. –í–≤–µ–¥–∏—Ç–µ email –≤ —Ñ–æ—Ä–º—É –ø–æ–¥–ø–∏—Å–∫–∏
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: "‚úì –°–ø–∞—Å–∏–±–æ! –í–∞—à email —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω"

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Vercel Dashboard ‚Üí Storage ‚Üí Neon ‚Üí Data
–í—ã —É–≤–∏–¥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `subscriptions` —Å –¥–∞–Ω–Ω—ã–º–∏:
- id
- email
- subscribed_at
- ip
- user_agent
- referrer
- status

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ API –∫–ª—é—á)

**–ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä**
```
https://–≤–∞—à-—Å–∞–π—Ç.vercel.app/api/subscriptions?format=json
```
–í headers –¥–æ–±–∞–≤—å—Ç–µ: `X-Api-Key: –≤–∞—à_api_–∫–ª—é—á`

**–ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ curl**
```bash
curl -H "X-Api-Key: –≤–∞—à_api_–∫–ª—é—á" \
  https://–≤–∞—à-—Å–∞–π—Ç.vercel.app/api/subscriptions
```

**–ú–µ—Ç–æ–¥ 3: –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV**
```bash
curl -H "X-Api-Key: –≤–∞—à_api_–∫–ª—é—á" \
  "https://–≤–∞—à-—Å–∞–π—Ç.vercel.app/api/subscriptions?format=csv" \
  -o subscriptions.csv
```

---

## üìä –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ

### –ü—Ä–∏ –∫–∞–∂–¥–æ–π –ø–æ–¥–ø–∏—Å–∫–µ:
‚úÖ Email —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Postgres –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö  
‚úÖ –ü–æ–ª—É—á–∞–µ—Ç–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ):
```
üÜï –ù–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ DreamsTalk!

üìß Email: user@example.com
üÜî ID: #42
üïê –í—Ä–µ–º—è: 25.11.2025, 21:30:15
üåê IP: 123.45.67.89
üì± Referrer: https://google.com
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
API endpoint `/api/subscriptions` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "success": true,
  "statistics": {
    "total": 127,
    "today": 5,
    "week": 23,
    "month": 89
  },
  "subscriptions": [...]
}
```

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–¢–∞–±–ª–∏—Ü–∞ `subscriptions` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–µ:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | SERIAL | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID |
| email | VARCHAR(255) | Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π) |
| subscribed_at | TIMESTAMP | –î–∞—Ç–∞ –ø–æ–¥–ø–∏—Å–∫–∏ |
| ip | VARCHAR(100) | IP –∞–¥—Ä–µ—Å |
| user_agent | TEXT | –ë—Ä–∞—É–∑–µ—Ä/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ |
| referrer | TEXT | –û—Ç–∫—É–¥–∞ –ø—Ä–∏—à—ë–ª |
| status | VARCHAR(50) | –°—Ç–∞—Ç—É—Å (active/inactive) |

---

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
vercel logs

# –°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
vercel env ls

# –û—Ç–∫—Ä—ã—Ç—å –¥–∞—à–±–æ—Ä–¥
vercel dashboard

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
# Vercel Dashboard ‚Üí Storage ‚Üí –≤–∞—à–∞ –ë–î ‚Üí Data
```

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
```bash
vercel env ls | grep POSTGRES
```
–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `POSTGRES_URL` –∏ –¥—Ä—É–≥–∏–µ.

### 2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
```bash
vercel logs --follow
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
F12 ‚Üí Console - –∏—â–∏—Ç–µ –æ—à–∏–±–∫–∏

### 4. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
```bash
curl -X POST https://–≤–∞—à-—Å–∞–π—Ç.vercel.app/api/subscribe \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com"}'
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "success": true,
  "message": "Subscription successful",
  "data": {
    "id": 1,
    "email": "test@example.com",
    "subscribed_at": "2025-11-25T18:30:00.000Z"
  }
}
```

---

## üí° –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
–ú–æ–∂–µ—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –≤ CSV:
```bash
curl -H "X-Api-Key: –≤–∞—à_–∫–ª—é—á" \
  "https://–≤–∞—à-—Å–∞–π—Ç.vercel.app/api/subscriptions?format=csv" \
  > emails.csv
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Email —Å–µ—Ä–≤–∏—Å–∞–º–∏
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ emails –¥–ª—è:
- Mailchimp
- SendGrid
- ConvertKit
- –ò–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π email-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å

### –†–∞—Å—Å—ã–ª–∫–∏
–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É, –ø—Ä–æ—Å—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ CSV –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ –≤–∞—à email —Å–µ—Ä–≤–∏—Å.

---

## ‚ú® –í—Å—ë –≥–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å:
- ‚úÖ –†–∞–±–æ—á–∞—è —Ñ–æ—Ä–º–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ Postgres –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 512 MB)
- ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ API –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –°–±–æ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (IP, referrer, user agent)

**–ü—Ä–æ—Å—Ç–æ –∑–∞–¥–µ–ø–ª–æ–π—Ç–µ:** `vercel --prod`
