server {
  listen 80;
  server_name dreamstalk.ru;

  root "/path/to/project_folder"; # Change path to folder with downloaded source
  index index.html;

  access_log off;
  autoindex off;
  charset utf-8;

  # Serve static assets directly.
  location ~ ^/(dist|img|lottie|snippets)/ {
    try_files $uri =404;
  }

  # Serve prerendered snippets for crawler requests that include `_escaped_fragment_`.
  location / {
    if ($arg__escaped_fragment_ != "") {
      if ($uri = "/") {
        rewrite ^ /snippets/1.html last;
      }
      rewrite ^/([.a-zA-Z0-9-_]+(?:/[.a-zA-Z0-9-_]+)*)/?$ /snippets/$1.html last;
    }

    # Default SPA routing for regular visitors.
    try_files $uri $uri/ /index.html;
  }
}
