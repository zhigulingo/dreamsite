import{a as y,b as S,e as I}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-K46LLQER.js";import{a as R,h as C,j as P}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-J37ZK3F4.js";import{i as w,k as z}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-NNSEZ57I.js";import{a as p,b as T}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-Q7PZB3WT.js";import{m as d,n as O,q as n,r as A}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-SEQO6JGA.js";import{a as E}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-CRBJZLYB.js";import{b as x,c as B}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-R72ZIPE6.js";import{a as $}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-LZBINVC2.js";import{b as _}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-MBCOPGYF.js";import{a as v,d as g}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-ZYG7ZY5I.js";var b,k=v(()=>{"use strict";T();b={"template-common-add-to-cart-wrap":p`
		<div class="add-to-cart-wrap">
			<div class="add-to-cart-attributes"></div>
			<div class="button-wrap">
				<div class="add-to-cart-button">
					<div class="add-to-cart-error-block"></div>
					<div class="button-icon"></div>
					<input type="text" class="button-text" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" readonly="readonly"/>
				</div>
			</div>
			<div class="sizes-calculating-block"></div>
		</div>
	`,"template-common-add-to-cart-wrap-viewer":p`
		<div class="add-to-cart-wrap">
			<div class="add-to-cart-attributes"></div>
			<div class="button-wrap">
				<div class="add-to-cart-button">
					<div class="add-to-cart-error-block"></div>
					<div class="button-icon"></div>
					<div class="button-text"></div>
				</div>
			</div>
			<div class="sizes-calculating-block"></div>
		</div>
	`}});var c,M,l,D,G,Q,H=v(()=>{"use strict";c=g($()),M=g(E()),l=g(_());A();B();O();k();P();I();R();z();D='<svg class="select-dropdown-triangle" width="10px" height="16px" viewBox="0 0 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="dev" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="E-comm-W-01.4" transform="translate(-632.000000, -263.000000)" fill="#FFFFFF"><g transform="translate(494.500000, 247.000000)"><g><g transform="translate(136.000000, 15.500000)"><path d="M3.88579937,12.2407434 L8.34920863,8.41496403 C8.76853447,8.05554188 9.39983445,8.10410342 9.7592566,8.52342926 C9.91460784,8.70467237 10,8.93550936 10,9.17422064 L10,16.8257794 C10,17.3780641 9.55228475,17.8257794 9,17.8257794 C8.76128873,17.8257794 8.53045174,17.7403872 8.34920863,17.585036 L3.88579937,13.7592566 C3.46647353,13.3998345 3.41791199,12.7685345 3.77733414,12.3492086 C3.81065883,12.3103298 3.84692056,12.2740681 3.88579937,12.2407434 Z" id="arrow-copy" transform="translate(6.500000, 13.000000) scale(-1, -1) rotate(-270.000000) translate(-6.500000, -13.000000) "></path><path d="M3.88579937,3.2407434 L8.34920863,-0.585035966 C8.76853447,-0.944458116 9.39983445,-0.895896579 9.7592566,-0.476570737 C9.91460784,-0.295327627 10,-0.0644906353 10,0.174220637 L10,7.82577936 C10,8.37806411 9.55228475,8.82577936 9,8.82577936 C8.76128873,8.82577936 8.53045174,8.7403872 8.34920863,8.58503597 L3.88579937,4.7592566 C3.46647353,4.39983445 3.41791199,3.76853447 3.77733414,3.34920863 C3.81065883,3.31032982 3.84692056,3.27406809 3.88579937,3.2407434 Z" id="arrow-copy" transform="translate(6.500000, 4.000000) scale(-1, 1) rotate(-270.000000) translate(-6.500000, -4.000000) "></path></g></g></g></g></g></svg>',G=M.default.View.extend({selectIconRight:4,selectIconTextMargin:2,eventDone:!1,initialize:function(t){l.default.bindAll(this),this.data=t.data,this.$container=t.$container,this.environment=t.environment,this.block=t.block,this.eCommerceManager=t.eCommerceManager,this.eCommerceCartManager=t.eCommerceCartManager,this.template=this.environment!=="constructor"?b["template-common-add-to-cart-wrap-viewer"]:b["template-common-add-to-cart-wrap"],this.product=null,this.selects=[],this.selectsMap={},this.attributes=[],this.selectsValues={},this.restrictions={},this.constraints={width:0,height:0},this.showSelects=!1,this.longestAttribute="",this.selectPadding=0,this.setData_debounced=l.default.debounce(this.setData,100),this.setModel_debounced=l.default.debounce(this.setModel,200),this.$container.html(this.template),this.setElement(this.$container.find(".add-to-cart-wrap")),this.$button=this.$el.find(".add-to-cart-button"),this.$buttonIcon=this.$button.find(".button-icon"),this.$errorBlock=this.$button.find(".add-to-cart-error-block"),this.$buttonText=this.$button.find(".button-text"),this.$attrsContainer=this.$el.find(".add-to-cart-attributes"),this.$sizesCalculatingBlock=this.$el.find(".sizes-calculating-block")},render:function(t){if(!this.rendered){if(this.provider=this.eCommerceManager.getConnectedProvider(),d.on("ecommerce:update:provider",this.onProviderChanged.bind(this)),!this.provider||this.data.selected_product_id==="default"){this.rendered=!1,this.showSelects=!1,this.renderButton(this.data,t),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.recalcDimensions({width:this.data.w,height:this.data.h}),this.trigger("loaded"),this.setMinimalDimensions();return}this.getProduct()}},destroy:function(){this.unbindDOMEvents(),d.off("ecommerce:update:provider",this.onProviderChanged.bind(this)),d.off("ecommerce:loadproducts:complete",this.getProduct.bind(this))},onProviderChanged(t){this.provider!==t&&(this.provider=t,this.rerender())},rerender(t){t&&(this.data=t),this.rendered=!1,this.render()},getProduct(){this.product=this.eCommerceManager.getProductById(this.data.selected_product_id),d.on("ecommerce:loadproducts:complete",this.getProduct.bind(this)),this.product?(this.showSelects=this.checkOptions(),this.renderSelects(this.data),this.renderButton(this.data),this.renderMargins(),this.data.layout==="horizontal"&&this.setHorizontalLayoutClass(),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.recalcDimensions({width:this.data.w,height:this.data.h}),this.trigger("loaded"),this.setMinimalDimensions(),this.bindDOMEvents()):(this.eCommerceManager.productsState==="loaded"||this.eCommerceManager.productsState==="error")&&(this.showSelects=!1,this.renderButton(this.data),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.recalcDimensions({width:this.data.w,height:this.data.h}),this.trigger("loaded"),this.setMinimalDimensions())},checkOptions:function(){return!this.provider||!this.product?!1:this.eCommerceManager.productHasActiveOptions(this.product)},renderButton:function(t,e){this.showSelects||(this.$attrsContainer.empty().css({"margin-bottom":0,"margin-right":0}),this.selects=[],this.selectsMap={},this.attributes=[]),this.setButtonText(t.text),this.environment!=="constructor"&&this.$button.addClass("viewer-button"),this.renderButtonIcon(t),(!e||!e.isNew)&&this.checkOutOfStock()},setButtonText:function(t){this.$buttonText&&(this.environment!=="constructor"?this.$buttonText.text(t):this.$buttonText.val(t))},getButtonText:function(){if(this.$buttonText)return this.environment!=="constructor"?this.$buttonText.text().trim():this.$buttonText.val().trim()},renderButtonIcon:function(t){if(t.icon_enabled){let e=t.icon_pos==="left"?"row":"row-reverse";this.$button.css("flex-direction",e),this.$buttonIcon.css({display:"inline-block",height:t.icon_h,width:t.icon_w})}else this.$buttonIcon.css({display:"none"})},renderSelects:function(t){if(this.$attrsContainer.empty().css({"margin-bottom":0,"margin-right":0}),this.selects=[],this.selectsMap={},this.attributes=[],!this.showSelects)return;let e=this.product||this.eCommerceManager.getProductById(t.selected_product_id);e&&(this.product||(this.product=e),!(this.environment!=="constructor"&&!e.active)&&(this.environment!=="constructor"&&this.calculateSelectRestrictions(),this.provider==="stripe"&&e.attributes.forEach(i=>{i.length>this.longestAttribute.length&&(this.longestAttribute=i);let s=this.renderStripeSelect(i);this.selects.push(s),this.selectsMap[i]=s,this.attributes.push(i)}),this.provider==="ecwid"&&e.options.forEach(i=>{if(!C.includes(i.type))return;i.name.length>this.longestAttribute.length&&(this.longestAttribute=i.name);let s=this.renderEcwidSelect(i);this.selects.push(s),this.selectsMap[i.name]=s,this.attributes.push(i.name)})))},renderStripeSelect:function(t){let e;if(this.environment==="constructor"){e=(0,c.default)("<select>",{class:"attributes-input",value:t}).attr("name",t);let i=(0,c.default)("<option>").attr("value",t).addClass("attributes-option default-option").text(t);e.append(i)}else e=(0,c.default)("<select>").attr("name",t).addClass("attributes-input"),this.renderSelectOptions(t,e,!0),e.on("change",this.onSelectChange.bind(this));return this.addSelectToPage(e,t),e},renderEcwidSelect(t){let e,i=t.nameTranslated?.[this.eCommerceManager.userLocale]||t.name;if(this.environment==="constructor"){e=(0,c.default)("<select>",{value:t.name}).attr("name",t.name).addClass("attributes-input");let s=(0,c.default)("<option>").attr("value",t.name).addClass("attributes-option default-option").text(i);e.append(s)}else e=(0,c.default)("<select>").attr("name",t.name).addClass("attributes-input"),this.renderEcwidSelectOptions(t.name,e,!0),e.on("change",this.onSelectChange.bind(this));return this.addSelectToPage(e,i),e},addSelectToPage(t,e){let i=(0,c.default)("<div>",{class:"select-container"});i.append('<div class="add-to-cart-error-block"></div>');let s=(0,c.default)("<input>",{type:"text",class:"fake-select",readonly:!0,tabindex:-1,value:e}),r=(0,c.default)(D);this.$attrsContainer.append(i),i.append(s,r,t),this.environment==="constructor"&&i.append((0,c.default)("<div>",{class:"select-overlay"}))},renderSelectOptions:function(t,e,i){let s=this.getAllSelectOptions();e.empty();let r=(0,c.default)("<option>").attr("value","default").addClass("attributes-option default-option").text(t);e.append(r),s[t]&&s[t].forEach(o=>{let a=(0,c.default)("<option>").attr("value",o).addClass("attributes-option").text(o);this.restrictions[t]&&!this.restrictions[t].includes(o)&&a.attr("disabled",!0),e.append(a)}),i?this.selectsValues[t]="default":e.val(this.selectsValues[t])},renderEcwidSelectOptions(t,e,i){let s=this.getTranslatedOptions(t);e.empty();let r=(0,c.default)("<option>").attr("value","default").addClass("attributes-option default-option").text(s[t].tanslatedName);e.append(r),s[t]&&s[t].values.forEach(o=>{let a=(0,c.default)("<option>").attr("value",o).addClass("attributes-option").text(s[t].translatedValues[o]);e.append(a)}),i?this.selectsValues[t]="default":e.val(this.selectsValues[t])},getAllSelectOptions(){let t={};return this.provider==="stripe"&&this.product.articles.forEach(e=>{Object.keys(e.attributes).forEach(i=>{t[i]=t[i]||[],t[i].includes(e.attributes[i])||t[i].push(e.attributes[i])})}),this.provider==="ecwid"&&this.product.options.forEach(e=>{t[e.name]=[],e.choices?.forEach(i=>t[e.name].push(i.text))}),t},getTranslatedOptions(t){let e={};return this.product.options.forEach(i=>{if(t&&i.name!==t)return;let s=i.nameTranslated?.[this.eCommerceManager.userLocale]||i.name;e[i.name]={tanslatedName:s,values:[],translatedValues:{}},i.choices?.forEach(r=>{e[i.name].values.push(r.text);let o=r.textTranslated&&r.textTranslated[this.eCommerceManager.userLocale]?r.textTranslated[this.eCommerceManager.userLocale]:r.text;e[i.name].translatedValues[r.text]=o})}),e},calculateSelectRestrictions:function(){if(this.provider==="ecwid")return;this.restrictions={};let t={},e=0,i;for(let s in this.selectsValues)this.selectsValues[s]!=="default"&&(t[s]=this.selectsValues[s],i=s,e+=1);this.product.articles.forEach(function(s){if(l.default.isMatch(s.attributes,t))for(let r in s.attributes)this.restrictions[r]?this.restrictions[r].indexOf(s.attributes[r])===-1&&this.restrictions[r].push(s.attributes[r]):this.restrictions[r]=[s.attributes[r]];e===1&&(this.restrictions[i]?this.restrictions[i].indexOf(s.attributes[i])===-1&&this.restrictions[i].push(s.attributes[i]):this.restrictions[i]=[s.attributes[i]])}.bind(this))},renderMargins:function(t){let e=t||this.data.layout;if(this.$attrsContainer.css({"margin-bottom":0,"margin-right":0}),this.showSelects&&this.selects.length){let i=this.selects.length-1;e==="horizontal"?(this.$attrsContainer.css({"margin-right":this.data.select_btn_margin}),this.selects.forEach(function(s,r){s.parent().css({"margin-bottom":0,"margin-right":r<i?this.data.attributes_margin:0})}.bind(this))):(this.$attrsContainer.css({"margin-bottom":this.data.select_btn_margin}),this.selects.forEach(function(s,r){s.parent().css({"margin-bottom":r<i?this.data.attributes_margin:0,"margin-right":0})}.bind(this)))}},generateIndividualStyleCSS:function(t,e,i){let s=e||"default",r=i||"both";this.environment==="constructor"?this.generateStyleCSS(t,s,r):(this.generateStyleCSS(t,s,r),this.generateHoverStyleCSS(t))},bindDOMEvents:function(){this.environment!=="constructor"&&(d.on("ecommerce:cartdata:changed",this.checkOutOfStock.bind(this)),this.eventDone||(this.$button.on("click",this.onAddToCartClick),this.eventDone=!0))},unbindDOMEvents:function(){this.environment!=="constructor"&&(d.off("ecommerce:cartdata:changed",this.checkOutOfStock.bind(this)),this.$button.off("click",this.onAddToCartClick),this.eventDone=!1)},getSimpleMinimalDimensions:function(){return this.showSelects?this.data.layout==="vertical"?{width:50,height:100}:{width:190,height:30}:{width:42,height:16}},getHorizontalTextMargin(t){return Math.ceil(t/4)},getVerticalTextMargin(t){return Math.ceil(t/6)},getHorizontalIconMargin(t){return Math.ceil(t/4)},getVerticalIconMargin(t){return Math.ceil(t/6)},getMinimalDimensions(){let t=0,e=0,i=this.data.icon_h+this.getVerticalIconMargin(this.data.icon_h)*2;if(this.data.tp==="text"?(t=this.data.text_w,e=this.data.text_h):this.data.tp==="icon"?(t=this.data.icon_w+this.getHorizontalIconMargin(this.data.icon_w)*2,e=i):(t=this.data.text_w+this.data.icon_w+this.getHorizontalTextMargin(this.data["font-size"]),e=this.data.text_h>i?this.data.text_h:i),this.showSelects){let s=this.data["attrs-icon-h"]+this.getVerticalIconMargin(this.data["attrs-icon-h"])*2,r=this.data["attrs-text_w"]+this.getSelectsPadding()*2,o=this.data["attrs-text_h"]>s?this.data["attrs-text_h"]:s,a=t>r?t:r,h=e>o?e:o,m=(this.selects.length-1)*this.data.attributes_margin,u=0,f=0;return this.data.layout==="vertical"?(u=a,f=h*(this.selects.length+1)+m+this.data.select_btn_margin):(u=a*(this.selects.length+1)+m+this.data.select_btn_margin,f=h),{width:u,height:f}}else return{width:t,height:e}},setMinimalDimensions(t,e){if(!l.default.isUndefined(t)&&!l.default.isUndefined(e)){this.constraints={width:t,height:e},this.block&&this.block.setSizeConstraints(t,e);return}if(this.environment==="constructor"){let i=this.getMinimalDimensions();this.constraints=i,this.block.setSizeConstraints(i.width,i.height)}},recalcDimensions(t){if(!this.rendered)return;let e=this.showSelects?this.data.select_btn_margin:0,i=this.showSelects?this.selects.length+1:1,s=this.showSelects?(this.selects.length-1)*this.data.attributes_margin:0;if(this.data.layout==="vertical"){if(!t.height)return;let r=t.height-e-s,o=Math.round(r/i);this.$button.css({height:o+"px",width:"100%"}),this.showSelects&&this.selects.forEach(function(a){a.parent().css({height:o+"px",width:"100%"})})}else{if(!t.width)return;let r=t.width-e-s,o=Math.round(r/i);this.$button.css({width:o+"px",height:"100%"}),this.showSelects&&this.selects.forEach(function(a){a.parent().css({width:o+"px",height:"100%"})})}},updateRecalcDimensionsOnProductChange(){let t=this.recalcDimensionsOnProductChange();this.block.updateBlockSizes(t)},recalcDimensionsOnProductChange(){let t=this.showSelects?this.data.select_btn_margin:0,e=this.showSelects?this.selects.length+1:1,i=this.showSelects?(this.selects.length-1)*this.data.attributes_margin:0,s=this.data.btn_h,r=this.data.btn_w,o,a;return this.data.layout==="vertical"?(o=s*e+i+t,a=r):(o=s,a=r*e+i+t),this.$button.css({height:s+"px",width:r+"px"}),this.showSelects&&this.selects.forEach(function(h){h.parent().css({height:s+"px",width:r+"px"})}),{width:a,height:o}},recalcWidgetSizesAfterChangeLayout:function(t){let e=t||this.data.layout,i=this.data.btn_h,s=this.data.btn_w,r=i,o=s;return this.showSelects&&(e==="horizontal"?o=s+s*this.selects.length+this.data.select_btn_margin+this.data.attributes_margin*(this.selects.length-1):r=i+i*this.selects.length+this.data.select_btn_margin+this.data.attributes_margin*(this.selects.length-1)),this.block.updateBlockSizes({width:o,height:r}),{width:o,height:r}},isAllSelectsNotDefault:function(){let t=!0;for(let e in this.selectsValues)if(this.selectsValues[e]==="default"){t=!1;break}return t},getArticleBySelectsValues:function(){return this.product?this.product.articles.length===1?this.product.articles[0]:this.product.articles.find(function(t){return l.default.isMatch(t.attributes,this.selectsValues)}.bind(this)):null},onSelectChange(t){this.hideError();let e=(0,c.default)(t.target),i=e.find("option:selected"),s=e.attr("name");this.selectsValues[s]=e.val(),e.parent().find(".fake-select").attr("value",e.val()==="default"?e.find("[value=default]").text():i.text()),this.calculateSelectRestrictions(),this.provider==="stripe"&&this.product.attributes.forEach(function(r){this.renderSelectOptions(r,this.selectsMap[r])}.bind(this))},onAddToCartClick:function(){if(this.hideError(),this.product||this.showError(),!this.isAllSelectsNotDefault()){this.showError("select");return}let t=this.eCommerceManager.getProductForAddToCart(this.product,this.selectsValues);if(t){let e=this.eCommerceCartManager?this.eCommerceCartManager.addProductToCart(t):null;if(e instanceof S){e.type===y.outOfStock?this.showOutOfStockError():this.showError();return}if(this.environment===x.environment.viewer){let i=this.eCommerceManager.getFormattedProductToAddToCart(t.object==="price"?this.product:t,t.selectedOptions),s=i?w(i):null;RM.analytics&&RM.analytics.sendEvent("Item added to cart",s?{ecommerceData:s}:t.id)}Object.keys(this.selectsMap).forEach(i=>{let s=this.selectsMap[i];s.find("option").prop("selected",!1),s.find("option[value=default]").prop("selected",!0),this.selectsValues[i]="default",s.parent().find(".fake-select").attr("value",s.find("option[value=default]").text()),this.calculateSelectRestrictions()}),Object.keys(this.selectsMap).length&&this.provider==="stripe"&&this.product.attributes.forEach(i=>this.renderSelectOptions(i,this.selectsMap[i]))}else this.showError()},showError(t){if(t==="select"){this.selects.map(e=>{e.parents(".select-container").toggleClass("add-to-cart-error",e.val()==="default")});return}this.$button.addClass("add-to-cart-error")},showOutOfStockError(){this.showError(),this.setButtonText(this.eCommerceManager.getTextValue("out_of_stock"))},showInvalidError(){this.showError(),this.environment!=="constructor"&&!RM.screenshot&&this.setButtonText("No product")},checkOutOfStock(){if(!RM.screenshot){if(!this.product||this.eCommerceManager.isProductActive(this.product.id)===void 0)return this.showInvalidError();if(this.provider==="stripe"&&this.environment!=="constructor"&&!RM.screenshot){let t=this.getArticleBySelectsValues();if(t&&!this.eCommerceManager.isProductAvailable(this.product,t.id))return this.showOutOfStockError()}if(this.provider==="ecwid"&&this.environment!=="constructor"&&!RM.screenshot&&!this.eCommerceManager.isProductAvailable(this.eCommerceManager.getProductForAddToCart(this.product,this.selectsValues)))return this.showOutOfStockError();this.setButtonText(this.data.text),this.hideError()}},hideError(){this.$button.removeClass("add-to-cart-error"),this.selects.map(t=>t.parents(".select-container").removeClass("add-to-cart-error")),this.setButtonText(this.data.text)},onProductChange:function(t){t&&(this.data=t),this.rendered=!1,this.product=this.eCommerceManager.getProductById(this.data.selected_product_id),this.showSelects=this.checkOptions(),this.showSelects?this.product&&(this.renderSelects(this.data),this.renderButton(this.data),this.renderMargins(),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.updateRecalcDimensionsOnProductChange()):(this.renderButton(this.data),this.generateIndividualStyleCSS(this.data),this.rendered=!0,this.updateRecalcDimensionsOnProductChange())},setHorizontalLayoutClass:function(){this.$el.hasClass("horizontal-layout")||this.$el.addClass("horizontal-layout")},removeHorizontalLayoutClass:function(){this.$el.hasClass("horizontal-layout")&&this.$el.removeClass("horizontal-layout")},onLayoutChange:function(t){if(!this.rendered)return;this.data=t;let e=t.layout,i=this.recalcWidgetSizesAfterChangeLayout(e);this.renderMargins(e),e==="horizontal"?this.setHorizontalLayoutClass():this.removeHorizontalLayoutClass(),this.recalcDimensions(i),this.setMinimalDimensions()},applyButtonTextSize:function(t){this.data=t,this.$buttonText.css({height:t.text_h+"px",width:t.text_w+"px"})},applyButtonIconPosition:function(t){this.data=t;let e=t.icon_pos==="left"?"row":"row-reverse";this.$button.css("flex-direction",e)},applySelectsIconSize:function(t){this.data=t,this.showSelects&&(this.selectPadding=t["attrs-icon-w"]+this.selectIconRight+this.selectIconTextMargin,this.selects.forEach(e=>{let i=e.parent();i.find(".fake-select").css({padding:`0 ${this.selectPadding}px`}),i.find(".select-dropdown-triangle").css({width:t["attrs-icon-w"]+"px",height:t["attrs-icon-h"]+"px"})}))},enterEditMode:function(t={}){this.$buttonText.removeAttr("readonly").addClass("editing"),t.selectText?this.$buttonText.select():this.$buttonText.focus().setCursorPos(0),this.block.selectEditControl()},leaveEditMode:function(){this.$buttonText.blur().attr("readonly",!0).removeClass("editing")},setData:function(t){this.data=t},setModel:function(t,e){this.block.model.set(t),e&&this.block.model.save()},getColorForErrorBorder(t){return t.isBorderSet?n.getRGBA(t.border,t.borderOpacity/100):n.getRGBA(t.bg,t.bgOpacity/100)},getSelectsPadding(){return this.selectPadding},getLongestAttribute(){return this.longestAttribute},generateStyleCSS:function(t,e,i){function s(a){return(e&&e!=="default"&&(i==="both"||i==="button")?"hover-":"")+a}function r(a){return(e&&e!=="default"&&(i==="both"||i==="selects")?"attrs-hover-":"attrs-")+a}let o=this.getColorForErrorBorder({bg:t[s("background-color")],bgOpacity:t[s("background-color-opacity")],border:t[s("border-color")],borderOpacity:t[s("border-color-opacity")],isBorderSet:!!t[s("border-width")]});if(this.$errorBlock.css({borderColor:o}),this.$button.css({color:n.getRGBA(t[s("color")],t[s("color-opacity")]/100),"background-color":n.getRGBA(t[s("background-color")],t[s("background-color-opacity")]/100),"border-radius":t[s("border-radius")]+"px","box-shadow":n.getRGBA(t[s("border-color")],t[s("border-color-opacity")]/100)+"0px 0px 0px "+t[s("border-width")]+"px inset"}),this.environment==="constructor")this.$button.find(".button-icon svg path").css({fill:n.getRGBA(t[s("icon_color")],t[s("icon_color_opacity")]/100)});else{let a=t[s("icon_raster2xUrl")]?t[s("icon_raster2xUrl")]:t[s("icon_rasterUrl")];a&&this.$buttonIcon.css({"background-image":"url("+a+")"})}this.$buttonText.css({width:t.text_w+"px",height:t.text_h+"px","line-height":t.text_h+"px","font-family":t[s("font-family")],"font-size":t[s("font-size")]+"px","font-weight":t[s("font-weight")],"font-style":t[s("font-style")],"letter-spacing":t[s("letter-spacing")],"text-align":t[s("text-align")]}),this.showSelects&&(this.selectPadding=t["attrs-icon-w"]+this.selectIconRight+this.selectIconTextMargin,this.selects.forEach(function(a){let h=a.parent();h.find(".add-to-cart-error-block").css({borderColor:o}),h.css({"background-color":n.getRGBA(t[r("background-color")],t[r("background-color-opacity")]/100),"border-radius":t[r("border-radius")]+"px","box-shadow":n.getRGBA(t[r("border-color")],t[r("border-color-opacity")]/100)+"0px 0px 0px "+t[r("border-width")]+"px inset"}),h.find(".fake-select").css({padding:`0 ${this.selectPadding}px`,"border-radius":t[r("border-radius")]+"px",color:n.getRGBA(t[r("color")],t[r("color-opacity")]/100),"font-family":t[r("font-family")],"font-size":t[r("font-size")]+"px","font-weight":t[r("font-weight")],"font-style":t[r("font-style")],"letter-spacing":t[r("letter-spacing")],"text-align":t[r("text-align")],"text-align-last":t[r("text-align")]}),h.find(".select-dropdown-triangle path").css({fill:n.getRGBA(t[r("color")],t[r("color-opacity")]/100)}),h.find(".select-dropdown-triangle").css({width:t["attrs-icon-w"],height:t["attrs-icon-h"]})}.bind(this)))},generateHoverStyleCSS:function(t){let e=this.$buttonText,i=this.$buttonIcon;this.$button.hover(function(){if((0,c.default)(this).css({color:n.getRGBA(t["hover-color"],t["hover-color-opacity"]/100),"background-color":n.getRGBA(t["hover-background-color"],t["hover-background-color-opacity"]/100),"border-radius":t["hover-border-radius"]+"px","box-shadow":n.getRGBA(t["hover-border-color"],t["hover-border-color-opacity"]/100)+"0px 0px 0px "+t["hover-border-width"]+"px inset"}),this.environment!=="constructor"){let s=t["hover-icon_raster2xUrl"]?t["hover-icon_raster2xUrl"]:t["hover-icon_rasterUrl"];s&&i.css({"background-image":"url("+s+")"})}else(0,c.default)(this).find(".button-icon svg path").css({fill:n.getRGBA(t["hover-icon_color"],t["hover-icon_color_opacity"]/100)});e.css({"font-family":t["hover-font-family"],"font-size":t["hover-font-size"]+"px","font-weight":t["hover-font-weight"],"font-style":t["hover-font-style"],"letter-spacing":t["hover-letter-spacing"],"text-align":t["hover-text-align"]})},function(){if((0,c.default)(this).css({color:n.getRGBA(t.color,t["color-opacity"]/100),"background-color":n.getRGBA(t["background-color"],t["background-color-opacity"]/100),"border-radius":t["border-radius"]+"px","box-shadow":n.getRGBA(t["border-color"],t["border-color-opacity"]/100)+"0px 0px 0px "+t["border-width"]+"px inset"}),this.environment!=="constructor"){let s=t.icon_raster2xUrl?t.icon_raster2xUrl:t.icon_rasterUrl;s&&i.css({"background-image":"url("+s+")"})}else(0,c.default)(this).find(".button-icon svg path").css({fill:n.getRGBA(t.color,t["color-opacity"]/100)});e.css({"font-family":t["font-family"],"font-size":t["font-size"]+"px","font-weight":t["font-weight"],"font-style":t["font-style"],"letter-spacing":t["letter-spacing"],"text-align":t["text-align"]})}),this.showSelects&&this.selects.forEach(function(s){s.hover(function(){(0,c.default)(this).parent().css({"background-color":n.getRGBA(t["attrs-hover-background-color"],t["attrs-hover-background-color-opacity"]/100),"border-radius":t["attrs-hover-border-radius"]+"px","box-shadow":n.getRGBA(t["attrs-hover-border-color"],t["attrs-hover-border-color-opacity"]/100)+"0px 0px 0px "+t["attrs-hover-border-width"]+"px inset"}),(0,c.default)(this).parent().find(".fake-select").css({"border-radius":t["attrs-hover-border-radius"]+"px",color:n.getRGBA(t["attrs-hover-color"],t["attrs-hover-color-opacity"]/100),"font-family":t["attrs-hover-font-family"],"font-size":t["attrs-hover-font-size"]+"px","font-weight":t["attrs-hover-font-weight"],"font-style":t["attrs-hover-font-style"],"letter-spacing":t["attrs-hover-letter-spacing"],"text-align":t["attrs-hover-text-align"],"text-align-last":t["attrs-hover-text-align"]}),(0,c.default)(this).parent().find(".select-dropdown-triangle path").css({fill:n.getRGBA(t["attrs-hover-color"],t["attrs-hover-color-opacity"]/100)})},function(){(0,c.default)(this).parent().css({"background-color":n.getRGBA(t["attrs-background-color"],t["attrs-background-color-opacity"]/100),"border-radius":t["attrs-border-radius"]+"px","box-shadow":n.getRGBA(t["attrs-border-color"],t["attrs-border-color-opacity"]/100)+"0px 0px 0px "+t["attrs-border-width"]+"px inset"}),(0,c.default)(this).parent().find(".fake-select").css({"border-radius":t["attrs-border-radius"]+"px",color:n.getRGBA(t["attrs-color"],t["attrs-color-opacity"]/100),"font-family":t["attrs-font-family"],"font-size":t["attrs-font-size"]+"px","font-weight":t["attrs-font-weight"],"font-style":t["attrs-font-style"],"letter-spacing":t["attrs-letter-spacing"],"text-align":t["attrs-text-align"],"text-align-last":t["attrs-text-align"]}),(0,c.default)(this).parent().find(".select-dropdown-triangle path").css({fill:n.getRGBA(t["attrs-color"],t["attrs-color-opacity"]/100)})}),setTimeout(function(){s.parent().css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"}),s.parent().find(".fake-select").css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"})}.bind(this),100),s.parent().find(".select-dropdown-triangle path").css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"})}.bind(this)),setTimeout(function(){this.$button.css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"}),e.css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"}),i.css({transition:"all "+t["hover-tansition-duration"]+"s ease-out"})}.bind(this),100)}},{DEFAULT_ROW_HEIGHT:50,DEFAULT_ROW_WIDTH:168}),Q=G});export{Q as a,H as b};
