import{a as Q,b as C1}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-SUE2QVGO.js";import{h as T,j as g1}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-QIWOAN2G.js";import{a as W}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-CWHPQFM7.js";import{m as j,p as _}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-EOQ6RWY5.js";import{a as H,c as O,d as G,e as N,g as q,k as u1}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-ACG2GWMF.js";import{a as f1}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-VPLWARFX.js";import{b as J,c as h1}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-6XZU5R4A.js";import{a as K}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-Q25SHUGF.js";import{a as n,d as D}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-RFFKETAO.js";import{b as u,c as E,e as $}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-6KH6X3XY.js";import{k as B,l as p1,r as v,v as R}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-XLELSLJ5.js";import{a as y,h as V,j as U,k as d1,n as Z,p as m1}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-F7HHU2GW.js";import{c as F}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-ZFCQ6P44.js";import{C as k,D as o,E as m,F as w}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-EW5ORGES.js";import{a as x}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-75DVMCH6.js";import{b as S,c as z}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-R72ZIPE6.js";import{d as C}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-ZYG7ZY5I.js";var c=C(x()),i1=C(d1());D();f1();h1();C1();_();u1();var X=C(x());w();function w1({state:e,children:t,duration:r=.5,onDone:i,style:a}){let s=O(0),d=G(s,[0,8,25,41,58,75,92,100],[0,-8,8,-8,8,-4,4,0]);return(0,X.useEffect)(()=>{e===!0?q(s,100,{duration:r}):s.set(0)},[e]),N(s,"animationComplete",()=>{e===!0&&i()}),o(H.div,{style:{...a,x:d},children:t})}var Y=w1;R();var e1=C(x()),I=(0,e1.createContext)({});var M=C(x());function o1(e){let[t,r]=(0,M.useState)(null);return(0,M.useEffect)(()=>{let i=new window.Image;i.src=e,i.onload=()=>{r(!0)},i.onerror=()=>{r(!1)}},[]),t}R();w();function L1({size:e=28,className:t}){let r=e,i=r*120/28;return o("svg",{className:t,width:i,height:r,viewBox:"0 0 120 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:o("g",{children:o("path",{d:"M11.539744,13.3211522 C11.9974687,11.8173116 13.2069828,10.6567646 15.3154495,10.6567646 C17.1298516,10.6567646 18.6331685,11.8173116 18.7970905,13.3211522 L11.539744,13.3211522 Z M15.3154495,8.07433809 C11.3925807,8.07433809 8.36892639,10.9510911 8.36892639,15.1355543 C8.36892639,19.3035205 11.539744,22.1967704 15.3154495,22.1967704 C18.1922025,22.1967704 20.300931,20.741897 21.5104452,18.7313646 L18.9767239,17.5870527 C18.519261,18.7313646 17.2770148,19.5981088 15.4626127,19.5981088 C12.8964213,19.5981088 11.3925807,17.865144 11.3925807,15.8546116 L21.6573465,15.8546116 L21.951673,14.988391 C21.951673,10.8039278 18.9439919,8.07433809 15.3154495,8.07433809 L15.3154495,8.07433809 Z M119.646319,14.4162351 L114.399767,14.4162351 L114.399767,16.8352633 L116.88426,16.8352633 C116.73762,18.6169334 115.119348,19.6138202 113.321181,19.6138202 C110.329735,19.6138202 109.038522,17.4236543 109.038522,15.2007565 C109.038522,12.9613617 110.34597,10.6732616 113.369887,10.6732616 C115.069857,10.6732616 116.344836,11.5557172 116.982194,12.7654932 L119.450451,11.5394821 C118.22444,9.30008729 116.132732,8.07433809 113.370148,8.05784114 C109.120483,8.07433809 106.08007,11.1144894 106.08007,15.2007565 C106.08007,19.4669188 109.398051,22.1965086 113.092581,22.1965086 C116.80256,22.1965086 119.940908,19.4669188 119.940908,15.2824556 L119.646581,14.4162351 L119.646319,14.4162351 Z M3.17107943,9.9377073 L3.00768112,9.80677917 L2.71335467,8.35216759 L0,8.35216759 L0,21.9021821 L3.00741926,21.9021821 L3.00741926,14.0074775 C3.07262147,12.3405004 4.21693337,10.9510911 6.53776549,10.9510911 L8.13980215,10.9510911 L8.13980215,8.35216759 C7.53491417,8.07459994 7.24058772,8.07459994 6.63596159,8.07459994 C5.39371545,8.07459994 4.23316846,8.61402386 3.17081757,9.9377073 M61.0675007,17.692057 L57.4858307,8.35242944 L54.3639802,8.35242944 L59.5906314,21.4805935 L57.175531,27.672185 L60.0195519,27.672185 L67.5544661,8.35242944 L64.710707,8.35242944 L61.0675007,17.692057 Z M50.4413733,9.51271458 L50.4413733,0 L53.4485307,0 L53.4485307,21.902444 L50.7356997,21.902444 L50.4411114,20.741897 L50.2939482,20.6109689 L50.1305499,20.741897 C49.2315973,21.6083794 47.7277568,22.1967704 46.207943,22.1967704 C42.2848123,22.1967704 38.9668315,19.3032587 38.9668315,15.1355543 C38.9668315,10.9510911 42.2848123,8.07433809 46.2076811,8.07433809 C47.6950247,8.07433809 49.2315973,8.64649404 50.1305499,9.51271458 L50.2939482,9.6598778 L50.4411114,9.51271458 L50.4413733,9.51271458 Z M46.3710794,19.597847 C48.9372709,19.597847 50.7354379,17.5867908 50.7354379,15.1355543 C50.7354379,12.683794 48.9372709,10.6567646 46.3710794,10.6567646 C43.4943264,10.6567646 41.9577539,12.6835322 41.9577539,15.1355543 C41.9577539,17.5870527 43.4943264,19.5975851 46.3710794,19.5975851 L46.3710794,19.597847 Z M30.2711085,19.597847 C27.4108525,19.597847 25.857783,17.5867908 25.857783,15.1355543 C25.857783,12.683794 27.4108525,10.6567646 30.2711085,10.6567646 C32.8373,10.6567646 34.6519639,12.6835322 34.6519639,15.1355543 C34.6519639,17.5870527 32.8373,19.5975851 30.2711085,19.5975851 L30.2711085,19.597847 Z M34.3408787,9.51271458 L34.1942392,9.6598778 L34.0468141,9.51271458 C33.1313646,8.64649404 31.6277859,8.07433809 30.1242072,8.07433809 C26.2016002,8.07433809 22.8830957,10.9510911 22.8830957,15.1355543 C22.8830957,19.3035205 26.2013384,22.1967704 30.1239453,22.1967704 C31.6277859,22.1967704 33.1313646,21.6083794 34.0468141,20.741897 L34.1939773,20.6109689 L34.3408787,20.741897 L34.6517021,21.902444 L37.3647949,21.902444 L37.3647949,8.35216759 L34.6519639,8.35216759 L34.3408787,9.51271458 L34.3408787,9.51271458 Z M83.8997963,8.07433809 C82.7062555,8.07433809 81.1861798,8.64649404 80.4346523,9.51271458 L79.682863,10.3789351 C78.8978179,8.95705557 77.3287751,8.07433809 75.1545825,8.07433809 C73.9453302,8.07433809 72.4417515,8.64649404 71.8368635,9.51271458 L71.6899622,9.6598778 L71.526302,9.51271458 L71.2319756,8.35216759 L68.5188827,8.35216759 L68.5188827,21.902444 L71.526302,21.902444 L71.526302,13.7134129 C71.5917661,12.046174 73.0791097,10.6567646 74.8442828,10.6567646 C76.3643585,10.6567646 77.263311,11.523247 77.263311,13.2556881 L77.263311,21.902444 L80.2872272,21.902444 L80.2872272,13.7134129 C80.3526913,12.046174 81.8237998,10.6567646 83.605208,10.6567646 C85.1090486,10.6567646 86.0242363,11.523247 86.0242363,13.2556881 L86.0242363,21.902444 L89.0319174,21.902444 L89.0319174,12.9616235 C89.0319174,10.0848705 87.2340122,8.07433809 83.8995345,8.07433809 M97.7276404,19.597847 C94.8671225,19.597847 93.3305499,17.5867908 93.3305499,15.1355543 C93.3305499,12.683794 94.8671225,10.6567646 97.7276404,10.6567646 C100.293832,10.6567646 102.108496,12.6835322 102.108496,15.1355543 C102.108496,17.5870527 100.293832,19.5975851 97.7276404,19.5975851 L97.7276404,19.597847 Z M101.813646,9.51271458 L101.667006,9.6598778 L101.503346,9.51271458 C100.604132,8.64649404 99.1005528,8.07433809 97.580739,8.07433809 C93.6576084,8.07433809 90.3393657,10.9510911 90.3393657,15.1355543 C90.3393657,19.3035205 93.6576084,22.1967704 97.5804772,22.1967704 C99.1005528,22.1967704 100.604132,21.6083794 101.503346,20.741897 L101.666744,20.6109689 L101.813646,20.741897 L102.108234,21.902444 L104.821327,21.902444 L104.821327,8.35216759 L102.108496,8.35216759 L101.813646,9.51271458 Z"})})})}var x1=v(L1)`
  g {
    fill: ${e=>e.color?e.theme.colors[e.color]||e.color:"#000"};
    transition: fill 0.1s;
  }

  &:hover g {
    fill: ${e=>e.hoverColor?e.theme.colors[e.hoverColor]||e.hoverColor:e.color?e.theme.colors[e.color]||e.color:"#000"};
  }
`,t1=x1;$();p1();U();z();m1();g1();var b=C(x());D();$();R();_();z();U();w();function r1({numId:e}){let[t,r]=(0,b.useState)(""),[i,a]=(0,b.useState)(""),s=`/api/mag/check-email-access/${e}`;(0,b.useEffect)(()=>{(async()=>{let p=new URLSearchParams(window.location.search).get("token"),f=p?{token:p}:void 0;if(f)try{await j(f,e),d(),window.location.reload()}catch(P){console.error("Authorization failed:",P);let g=P.errorOptions||{};L(g.type&&typeof g.type=="string"?g.type:"authorization_failed"),d()}})()},[e]);let d=()=>{let l=new URL(window.location.href),h=new URLSearchParams(l.search);h.delete("token");let p=h.toString(),f=`${l.pathname}${p?"?"+p:""}${l.hash}`;window.history.pushState({},"",f)},L=l=>{l==="email_confirmation"?(r("Verify your email"),a("Follow a link in your mail inbox to get verified and open the project")):(r("This project is open only for designated users"),a("Reach out to the project owner to get access"))};return o(n,{display:"flex",alignItems:"center",flexDirection:"column",width:391,height:t&&i?"auto":236,backgroundColor:"white",borderRadius:32,padding:t&&i?"48px 54px":48,fontFamily:V.main,children:t&&i?m(n,{display:"flex",justifyContent:"center",height:"100%",flexDirection:"column",children:[o(n,{marginBottom:8,textAlign:"center",children:o(u,{color:"black",textStyle:"subheading",children:t})}),o(u,{textAlign:"center",color:"darkGray",textStyle:"regular",children:i})]}):m(k,{children:[o(n,{marginBottom:8,textAlign:"center",children:o(u,{color:"black",textStyle:"subheading",children:"This project is protected by email login"})}),o(u,{color:"darkGray",textStyle:"regular",children:"Log in or register to get access"}),o(E,{marginTop:"auto",href:`${S.readymag_auth_host}/auth/login?redirect=${encodeURIComponent(s)}`,css:F`
              &:hover {
                color: white;
              }
            `,children:o(n,{textAlign:"center",borderRadius:100,width:295,height:40,background:y.red,padding:"10px 24px",children:o(u,{color:"white",textStyle:"small",children:"Continue"})})})]})})}w();var n1=n.withComponent(v("form")`
  max-width: 418px;
  flex-grow: 1;
  display: flex;
  align-items: center;
  justify-content: center;
`);n1.defaultProps={blacklist:["width"]};function y1(){let{publicPath:e,project:t}=(0,c.useContext)(I);if(t)return{backgroundSrc:t.pass_bg||`${e}/img/viewer/mag-password/bg.jpg`,user:t.user,numId:t.num_id,isEmailProtection:t.isProjectEmailPrivate?.isEnabled};let r=T(a=>a.meta),i=T(a=>a.model.isProjectEmailPrivate);return{backgroundSrc:r.forbiddenBackground||`${r.publicPath}/img/viewer/mag-password/bg.jpg`,user:r.owner,numId:r.num_id,isEmailProtection:i?.isEnabled}}function b1({shakerState:e,password:t,setPassword:r,onSubmit:i,inputRef:a,showUserInfo:s,toggleShaker:d}){return m(k,{children:[o(n1,{onSubmit:i,width:["90%","100%"],children:o(Y,{state:e,onDone:()=>d(!1),style:{width:"100%"},children:m(n,{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"white",borderRadius:25,height:50,width:"100%",...Q.fixRadiusClip(),children:[o(n,{height:"100%",width:"100%",padding:"0 6px 0 25px",children:o(K,{ref:a,type:"password",value:t,onChange:L=>r(L.target.value),border:"none",padding:0,height:"100%",placeholder:"Enter password",fontSize:20})}),o(n,{height:"100%",children:o(J,{borderRadius:"0 25px 25px 0",width:110,height:"100%",color:"white",background:t.length?"#0078ff":"#999",disabled:!t,type:"submit",variant:"clean",fontSize:20,children:"Open"})})]})})}),s&&m(n,{width:"100%",paddingLeft:"8rm",paddingBottom:"8rm",children:[o(u,{as:"div",color:B(.7,y.white),fontSize:11,lineHeight:"14px",children:"Made with"}),o(E,{href:S.readymag_host,children:o(t1,{color:B(.7,y.white),hoverColor:"white",size:18})})]})]})}function a1({type:e="project"}){let t=e==="page",[r,i]=(0,c.useState)(""),[a,s]=(0,c.useState)(!1),[d,L]=(0,c.useState)(!0),{backgroundSrc:l,user:h,numId:p,isEmailProtection:f}=y1(),P=o1(l),g=(0,c.useRef)(null),s1=e==="project"&&(!h?.permissions||h?.permissions?.white_label===!1);(0,c.useEffect)(()=>{e==="project"&&g.current?.focus()},[e]);let c1=async()=>{try{p?(await j({pass:r},p),t&&L(!1),setTimeout(()=>{window.location.reload()},500)):s(!0)}catch{s(!0)}},l1=A=>{A.preventDefault(),c1()};return o(n,{height:"100vh",width:"100vw",backgroundColor:"#000",position:t?"absolute":void 0,children:m(n,{width:"100%",height:"100%",opacity:P!==null?1:0,transition:".4s ease opacity",children:[o(n,{display:"flex",position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundImage:`url('${l}')`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",zIndex:0}),o(n,{display:"flex",width:"100%",height:"100%",alignItems:"center",flexDirection:"column",position:"relative",justifyContent:"center",zIndex:1,opacity:t?d?1:0:1,transition:".4s ease opacity",children:f?o(r1,{numId:p}):o(b1,{shakerState:a,password:r,setPassword:i,onSubmit:l1,inputRef:g,showUserInfo:s1,toggleShaker:s})})]})})}function ne(e){if(!e)throw new Error("Cannot create forbidden page");let t=W();i1.default.render(o(Z,{withGlobalStyles:!1,children:o(I.Provider,{value:t,children:o(a1,{type:"page"})})}),e)}var ae=a1;export{I as a,t1 as b,ne as c,ae as d};
