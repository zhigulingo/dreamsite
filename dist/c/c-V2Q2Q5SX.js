import{a as dt,b as Ao}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-UOEKAWBU.js";import{a as Te,b as ct}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-D2IOZYJL.js";import{a as re,b as Ve}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-3QJY62BI.js";import{T as Ne,U as Oe,V as ft,W as $e,X as Ke,Y as ht,Z as yt,da as Oo}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-FY6OYQ7J.js";import{a as lt,b as Do}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-UHXDCVRZ.js";import{a as bt,b as Ko}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-FILHTIZ4.js";import{e as wt,f as vt,h as Ho}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-6F4MPFNO.js";import{a as be,b as we,k as xt}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-ACG2GWMF.js";import{a as ut,b as Vo}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-SWJBEXY2.js";import{a as gt,b as No}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-X75HIC2Q.js";import{a as $o}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-VPLWARFX.js";import{b as ve,c as Tt}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-6XZU5R4A.js";import{a as He}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-Q25SHUGF.js";import{a as s,d as U}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-RFFKETAO.js";import{g as _e,l as Uo,q as st,r as Mo}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-SEQO6JGA.js";import{a as ue,b as P,c as W,e as N}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-6KH6X3XY.js";import{k as Ae,l as zo,r as pt,v as j}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-XLELSLJ5.js";import{a as l,c as xe,j as V}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-F7HHU2GW.js";import{c as mt,d as _o}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-BQ6MT626.js";import{c as B}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-ZFCQ6P44.js";import{C as O,D as i,E as g,F as y}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-EW5ORGES.js";import{a as D}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-75DVMCH6.js";import{b as A,c as oe}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-R72ZIPE6.js";import{a as S,b as Ro,d as R}from"https://st-p.rmcdn1.net/fb5a3d71/dist/c/c-ZYG7ZY5I.js";function St(e="idle"){let[t,r]=(0,Pt.useState)(e);return{status:t,setStatus:r,isIdle:t==="idle",isPending:t==="pending",isError:t==="error",isSuccess:t==="success"}}var Pt,Ct=S(()=>{"use strict";Pt=R(D())});function Pe({src:e,onError:t}){let{isError:r,isPending:n,setStatus:a}=St("pending"),p=(0,ge.useRef)(new Set),c=(0,ge.useRef)(new Set);return(0,ge.useEffect)(function(){if(!e)return;a("pending");let o=new Image;return o.src=e,o.onload=()=>{p.current.add(e),a("success")},o.onerror=()=>{c.current.add(e),a("error"),t?.()},function(){o.onload=null,o.onerror=null}},[e,t,a]),e?{isPending:n,isError:r}:{isPending:!1,isError:!1}}var ge,je=S(()=>{"use strict";ge=R(D());Ct()});var Ge,Cr,Ft=S(()=>{"use strict";Ge={sidebarZindex:7100,sidebarWidth:"240px",popupZindex:9999,moveSpeed:"0.3s"},Cr={projectSettings:1,pageItem:1,footerButtons:2,helpPanel:3}});var kt,jo,Go,It,Lt=S(()=>{"use strict";kt=R(D());U();No();Ft();y();jo=e=>{(0,kt.useEffect)(()=>{let t=r=>{let n=r.target;n.tagName!=="INPUT"&&n.tagName!=="TEXTAREA"&&!n.isContentEditable&&e&&e(r)};return window.addEventListener("keydown",t,{capture:!0}),()=>{window.removeEventListener("keydown",t,{capture:!0})}},[e])},Go=({children:e})=>(jo(t=>{t.preventDefault(),t.stopPropagation()}),g(O,{children:[i(gt,{zIndex:Ge.popupZindex-1,backgroundColor:"black","data-testid":"fullscreen-modal-overlay"}),i(s,{display:"flex",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:Ge.popupZindex+1,padding:"0",borderRadius:"0",flexDirection:"column",backgroundColor:"lightGray",overflow:"auto",children:e})]})),It=Go});function Dr({userModel:e,children:t}){let[r,n]=(0,H.useState)(()=>e?{...e.attributes}:void 0);(0,H.useEffect)(()=>{function o(m){n(h=>({...h,...m.attributes}))}return e?.on("change",o),()=>{e?.off("change",o)}},[]);let a=(0,H.useCallback)(o=>{if(r){let m={...r.opts,...o};n({...r,opts:m}),e?.save({opts:m},{patch:!0,silent:!0})}},[e,r]),p=(0,H.useCallback)(o=>{r&&n({...r,...o})},[r]),c=(0,H.useCallback)(o=>{e?.save({behavior_metrics:{...e.get("behavior_metrics")||{},...o}},{patch:!0,silent:!0})},[e]),d=!!(window?.RM?.constructorRouter?.isOwner&&st.isFreePlan(r?.plan));return i(Se.Provider,{value:{user:r,isFreePlan:d,setUserOptions:a,setUserMetrics:c,updateUser:p},children:t})}var H,Se,zr,Bt=S(()=>{"use strict";H=R(D());Mo();y();Se=(0,H.createContext)({user:void 0,isFreePlan:!0,setUserOptions:()=>{},setUserMetrics:()=>{},updateUser:()=>{}});zr=()=>(0,H.useContext)(Se)});var Et,Wo,Rt,Ut=S(()=>{"use strict";xt();Et=R(D());U();N();j();V();y();Wo=({onClose:e})=>i(s,{as:"button",onClick:e,color:"white",background:"none",border:"none",fontSize:15,cursor:"pointer",paddingInline:0,css:B`
      &:hover {
        opacity: 0.7;
      }
    `,children:"\u2715"}),Rt=({message:e,open:t,onClose:r,duration:n=5e3})=>((0,Et.useEffect)(()=>{if(t){let a=setTimeout(r,n);return()=>clearTimeout(a)}},[t,n,r]),i(we,{children:t&&i(be.div,{initial:{y:-80,opacity:0},animate:{y:0,opacity:1},exit:{y:-80,opacity:0},transition:{type:"spring",bounce:0},style:{zIndex:9999},children:g(s,{position:"fixed",top:0,left:0,right:0,backgroundColor:l.blue,padding:"14px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:9999,children:[i(ue,{color:"white",textStyle:"small",fontWeight:"500",children:e}),i(Wo,{onClose:r})]})})}))});var Wr,Ce,We=S(()=>{"use strict";Wr=async(e,t)=>{let r=new FormData;return r.append("name",e),r.append("upload",t),await fetch("/api/upload",{headers:{"cache-control":"no-cache"},method:"post",body:r}).then(n=>n.json())},Ce=async(e,t)=>{let r=new FormData;return r.append("name",e),r.append("upload",t),await fetch("/api/upload/lambda",{headers:{"cache-control":"no-cache"},method:"post",body:r}).then(n=>n.json())}});var Mt,Dt,zt,_t,qe,At,Vt,Ze=S(()=>{"use strict";Xe();Fe();Mt=e=>ke({screenshotUrl:e.screenshotUrl,usePhoneScreenshot:e.usePhoneScreenshot,viewport:e.viewport,imageSize:"large_plus"}),Dt=(e,t)=>{let r=t.map(n=>{let a={page:n._id,previews:{...n.screenshot&&{default:Mt({screenshotUrl:n.screenshot,viewport:"default"})},...n.viewport_phone_portrait?.screenshot&&{phone_portrait:Mt({screenshotUrl:n.viewport_phone_portrait.screenshot,usePhoneScreenshot:n.viewport_phone_portrait?.enabled||!1,viewport:"phone_portrait"})}}},p=e.pages?.find(c=>String(c.page)===String(n._id));return p?{page:n._id,previews:{...a.previews,...p.previews}}:a});return{cover:e.cover,pages:r}},zt=(e,t,r,n)=>{let a=[...e.pages||[]],p=a.findIndex(c=>c.page?.toString()===t.toString());return p!==-1?a[p]={...a[p],previews:{...a[p].previews,[r]:n}}:a.push({page:t,previews:{[r]:n}}),{...e,pages:a}},_t=(e,t)=>e.pages?.find(n=>n.page?.toString()===t.toString())?.previews,qe=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},At=e=>{localStorage.removeItem(e)},Vt=e=>JSON.parse(localStorage.getItem(e)||"{}")});var Zo,Ie,Ye=S(()=>{"use strict";j();Tt();V();y();Zo=({children:e,...t})=>i(ve,{variant:"unstyled",display:"block",width:272,height:48,lineHeight:"48px",borderRadius:8,textStyle:"regular",cursor:"pointer",color:"white",transition:".1s ease-in",userSelect:"none",css:B`
        &:hover {
          opacity: ${t.backgroundColor===l.darkGray?1:.7};
        }
      `,...t,children:e}),Ie=Zo});var Xo,Nt,Ot=S(()=>{"use strict";U();N();Ye();V();y();Xo=({onExit:e})=>i(s,{display:"flex",height:"100vh",alignItems:"center",justifyContent:"center",backgroundColor:l.lightGray,children:g(s,{width:"min(90vw, 775px)",height:"min(90vh, 441px)",minWidth:560,padding:24,backgroundColor:"white",borderRadius:8,display:"flex",flexDirection:"column",justifyContent:"space-between",transform:"rotate(-2.38deg)",children:[g(P,{fontSize:110,fontWeight:500,lineHeight:"91px",color:l.black,children:["Your template\u2019s",i("br",{}),"submitted"]}),g(s,{display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",gap:8,children:[g(P,{fontSize:24,fontWeight:400,color:l.black,lineHeight:"26px",children:["The review process usually takes 21 days.",i("br",{}),"Check your email for status updates."]}),i(Ie,{width:148,backgroundColor:l.blue,onClick:e,children:"Return to work"})]})]})}),Nt=Xo});var Kt=Ro((Le,$t)=>{"use strict";(function(e,t){if(typeof define=="function"&&define.amd)define(["module","exports"],t);else if(typeof Le<"u")t($t,Le);else{var r={exports:{}};t(r,r.exports),e.autosize=r.exports}})(Le,function(e,t){"use strict";var r=typeof Map=="function"?new Map:function(){var o=[],m=[];return{has:function(f){return o.indexOf(f)>-1},get:function(f){return m[o.indexOf(f)]},set:function(f,x){o.indexOf(f)===-1&&(o.push(f),m.push(x))},delete:function(f){var x=o.indexOf(f);x>-1&&(o.splice(x,1),m.splice(x,1))}}}(),n=function(m){return new Event(m,{bubbles:!0})};try{new Event("test")}catch{n=function(h){var f=document.createEvent("Event");return f.initEvent(h,!0,!1),f}}function a(o){if(!o||!o.nodeName||o.nodeName!=="TEXTAREA"||r.has(o))return;var m=null,h=null,f=null;function x(){var T=window.getComputedStyle(o,null);T.resize==="vertical"?o.style.resize="none":T.resize==="both"&&(o.style.resize="horizontal"),T.boxSizing==="content-box"?m=-(parseFloat(T.paddingTop)+parseFloat(T.paddingBottom)):m=parseFloat(T.borderTopWidth)+parseFloat(T.borderBottomWidth),isNaN(m)&&(m=0),b()}function k(T){{var v=o.style.width;o.style.width="0px",o.offsetWidth,o.style.width=v}o.style.overflowY=T}function I(T){for(var v=[];T&&T.parentNode&&T.parentNode instanceof Element;)T.parentNode.scrollTop&&v.push({node:T.parentNode,scrollTop:T.parentNode.scrollTop}),T=T.parentNode;return v}function C(){if(o.scrollHeight!==0){var T=I(o),v=document.documentElement&&document.documentElement.scrollTop;o.style.height="",o.style.height=o.scrollHeight+m+"px",h=o.clientWidth,T.forEach(function(F){F.node.scrollTop=F.scrollTop}),v&&(document.documentElement.scrollTop=v)}}function b(){C();var T=Math.round(parseFloat(o.style.height)),v=window.getComputedStyle(o,null),F=v.boxSizing==="content-box"?Math.round(parseFloat(v.height)):o.offsetHeight;if(F<T?v.overflowY==="hidden"&&(k("scroll"),C(),F=v.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(o,null).height)):o.offsetHeight):v.overflowY!=="hidden"&&(k("hidden"),C(),F=v.boxSizing==="content-box"?Math.round(parseFloat(window.getComputedStyle(o,null).height)):o.offsetHeight),f!==F){f=F;var G=n("autosize:resized");try{o.dispatchEvent(G)}catch{}}}var u=function(){o.clientWidth!==h&&b()},L=function(T){window.removeEventListener("resize",u,!1),o.removeEventListener("input",b,!1),o.removeEventListener("keyup",b,!1),o.removeEventListener("autosize:destroy",L,!1),o.removeEventListener("autosize:update",b,!1),Object.keys(T).forEach(function(v){o.style[v]=T[v]}),r.delete(o)}.bind(o,{height:o.style.height,resize:o.style.resize,overflowY:o.style.overflowY,overflowX:o.style.overflowX,wordWrap:o.style.wordWrap});o.addEventListener("autosize:destroy",L,!1),"onpropertychange"in o&&"oninput"in o&&o.addEventListener("keyup",b,!1),window.addEventListener("resize",u,!1),o.addEventListener("input",b,!1),o.addEventListener("autosize:update",b,!1),o.style.overflowX="hidden",o.style.wordWrap="break-word",r.set(o,{destroy:L,update:b}),x()}function p(o){var m=r.get(o);m&&m.destroy()}function c(o){var m=r.get(o);m&&m.update()}var d=null;typeof window>"u"||typeof window.getComputedStyle!="function"?(d=function(m){return m},d.destroy=function(o){return o},d.update=function(o){return o}):(d=function(m,h){return m&&Array.prototype.forEach.call(m.length?m:[m],function(f){return a(f,h)}),m},d.destroy=function(o){return o&&Array.prototype.forEach.call(o.length?o:[o],p),o},d.update=function(o){return o&&Array.prototype.forEach.call(o.length?o:[o],c),o}),t.default=d,e.exports=t.default})});var fe,Be,Yo,Ht,jt=S(()=>{"use strict";fe=R(D()),Be=R(Kt()),Yo=()=>{let[e,t]=(0,fe.useState)(null);return(0,fe.useEffect)(()=>{if(e)return(0,Be.default)(e),()=>{e&&Be.default.destroy(e)}},[e]),(0,fe.useEffect)(()=>{e&&Be.default.update(e)}),t},Ht=Yo});var Gt,Jo,Qo,Wt,q,Je=S(()=>{"use strict";Gt=R(D());j();jt();_o();N();y();Jo=pt("textarea")`
  box-sizing: border-box;
  display: block;
  width: 100%;
  background: transparent;
  border: none;
  outline: none;
  resize: none;
  font-family: inherit;

  &::placeholder {
    color: ${({theme:e})=>e.colors.gray};
  }
`,Qo=(0,Gt.forwardRef)(({autoSize:e=!1,...t},r)=>{let n=Ht();return i(Jo,{ref:mt(r,e?n:null),...t})}),Wt=P.withComponent(Qo);Wt.defaultProps={padding:0,textStyle:"regular",color:"black"};q=Wt});var Qe=S(()=>{"use strict";Je();Je()});var ie,ne,Y,bi,wi,qt,vi,Pi,Zt=S(()=>{"use strict";ie={CompanyWebsite:"company-website",Portfolio:"portfolio",Presentation:"presentation",Editorial:"editorial",LandingPage:"landing-page",ECommerce:"e-commerce"},ne={CompanyWebsite:"company website",Portfolio:"portfolio",Presentation:"presentation",Editorial:"editorial",LandingPage:"landing page",ECommerce:"ecommerce"},Y={company_website:{title:"Company website",color:"#8C8C8C",activeTextColor:"white",path:ie.CompanyWebsite,type:ne.CompanyWebsite},photo_stories:{title:"Landing page",color:"#FFCB00",activeTextColor:"white",path:ie.LandingPage,type:ne.LandingPage},presentations:{title:"Presentation",color:"#408D27",activeTextColor:"white",path:ie.Presentation,type:ne.Presentation},microsites:{title:"Portfolio",color:"#FF7CBE",activeTextColor:"white",path:ie.Portfolio,type:ne.Portfolio},longreads:{title:"Editorial",color:"#0080FF",activeTextColor:"white",path:ie.Editorial,type:ne.Editorial},e_commerce:{title:"Online store",color:"#8E0D99",activeTextColor:"white",path:ie.ECommerce,type:ne.ECommerce}},bi=e=>Y[e]?.path||"",wi=e=>Object.entries(Y).find(([,t])=>t.path===e)?.[0],qt=e=>Y[e]?.title||"",vi=e=>Y[e]?.color||"#032BFF",Pi=e=>Y[e]?.activeTextColor||"white"});var er,Xt,Yt=S(()=>{"use strict";U();N();j();Zt();V();y();er=({color:e,selectedTags:t,onChange:r})=>g(O,{children:[i(s,{paddingLeft:8,children:i(P,{textStyle:"small",color:e,children:"Choose primary tags"})}),i(s,{display:"flex",flexWrap:"wrap",gap:3,marginTop:4,children:Object.keys(Y).map(n=>i(s,{backgroundColor:t.includes(n)?"#CCE6FF":l.lightGray,color:t.includes(n)?l.blue:l.black,padding:"3px 8px",display:"flex",alignItems:"center",height:24,borderRadius:8,cursor:"pointer",onClick:()=>{let a=[];t.includes(n)?a=t.filter(p=>p!==n):a=[...t,n],r(a)},css:B`
              &:hover {
                opacity: 0.7;
              }
            `,children:i(P,{textStyle:"small",children:qt(n)})},n))})]}),Xt=er});var ae,tr,Jt,Qt=S(()=>{"use strict";ae=R(D());U();V();Ko();y();tr=({width:e,selected:t,values:r,captions:n,onChange:a,margin:p,height:c=40,borderRadius:d=8,bgColor:o=l.gray,hoverColor:m=l.darkGray,activeHoverColor:h=l.red,activeColor:f=l.black})=>{let[x,k]=(0,ae.useState)(t),[I,C]=(0,ae.useState)(null),[b,u]=(0,ae.useState)(!1);return(0,ae.useEffect)(()=>{k(t)},[t]),g(s,{display:"flex",position:"relative",width:e,height:c,backgroundColor:!I||b||I===x?o:m,borderRadius:d,justifyContent:"space-between",cursor:"pointer",margin:p,children:[i(bt,{as:"select",value:t,onChange:L=>{a(L.currentTarget&&L.currentTarget.value===r[0]?r[0]:r[1])}}),i(s,{position:"absolute",width:e/2,height:c,borderRadius:d,padding:12,transform:`translateX(${x===r[0]?"0px":`${e/2}px`})`,transition:"transform 0.2s ease-in-out",backgroundColor:I===x&&!b?h:f}),i(s,{display:"flex",position:"absolute",left:0,alignItems:"center",justifyContent:"center",width:e/2,height:c,borderRadius:d,padding:12,onMouseEnter:()=>{C(r[0])},onMouseLeave:()=>{u(!1),C(null)},onClick:()=>{u(!0),k(r[0]),a(r[0])},children:n[0]}),i(s,{display:"flex",position:"absolute",right:0,alignItems:"center",justifyContent:"center",width:e/2,height:c,borderRadius:d,padding:12,onMouseEnter:()=>{C(r[1])},onMouseLeave:()=>{u(!1),C(null)},onClick:()=>{u(!0),k(r[1]),a(r[1])},children:n[1]})]})},Jt=tr});function or({text:e,href:t,width:r=160,height:n,padding:a="12px 16px",boxPosition:p,arrowPosition:c,onClick:d,variant:o="default",forceShow:m,whiteSpace:h,triggerSize:f=24,...x}){let k=(0,J.useRef)(null),I=(0,J.useRef)(null),[C,b]=(0,J.useState)(!!m),u=o==="white";return(0,J.useEffect)(()=>()=>{I.current&&clearTimeout(I.current)},[]),g(s,{position:"relative",width:f,height:f,minWidth:f,onMouseEnter:()=>{I.current&&(clearTimeout(I.current),I.current=null),b(!0)},onMouseLeave:()=>{I.current=setTimeout(()=>{b(!1)},300)},...x,children:[i(s,{as:t?"a":void 0,href:t,target:t?"_blank":void 0,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",width:f,height:f,lineHeight:f,cursor:"pointer",onClick:()=>d&&d(),textDecoration:"none",css:B`
          &:hover {
            path {
              fill: ${u?l.white:Ae(.04,l.darkGray)};
            }
          }
        `,children:i("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i("path",{fill:l.gray,opacity:"0.96",d:"M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM7.86719 9.56152C7.6875 9.56152 7.54167 9.61751 7.42969 9.72949C7.31782 9.83885 7.26172 9.98349 7.26172 10.1631C7.26179 10.34 7.31778 10.4835 7.42969 10.5928C7.54165 10.702 7.68759 10.7568 7.86719 10.7568C8.04679 10.7568 8.19143 10.702 8.30078 10.5928C8.41269 10.4835 8.46868 10.34 8.46875 10.1631C8.46875 9.98088 8.41265 9.83494 8.30078 9.72559C8.19141 9.61621 8.04688 9.56152 7.86719 9.56152ZM7.96484 4.9834C7.41536 4.9834 6.98698 5.12923 6.67969 5.4209C6.3725 5.70994 6.20963 6.08765 6.19141 6.55371H7C7.01822 6.30379 7.10948 6.10578 7.27344 5.95996C7.4375 5.81152 7.65365 5.7373 7.92188 5.7373C8.1875 5.7373 8.40104 5.80762 8.5625 5.94824C8.72385 6.08624 8.80469 6.26342 8.80469 6.47949C8.80464 6.67466 8.75776 6.83894 8.66406 6.97168C8.57028 7.10182 8.40351 7.23869 8.16406 7.38184C7.8907 7.54587 7.69399 7.72432 7.57422 7.91699C7.45453 8.10705 7.39974 8.34028 7.41016 8.61621L7.41406 8.91309H8.22266V8.67871C8.22266 8.48091 8.26833 8.31931 8.35938 8.19434C8.4505 8.06676 8.62117 7.92868 8.87109 7.78027C9.41786 7.45221 9.6913 7.00668 9.69141 6.44434C9.69141 6.01732 9.53114 5.66697 9.21094 5.39355C8.89323 5.12012 8.47786 4.9834 7.96484 4.9834Z"})})}),e?i(we,{children:C?i(be.div,{style:{position:"absolute",bottom:"100%",left:0,pointerEvents:"auto"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:0},children:i(s,{position:"absolute",bottom:0,marginBottom:"12px",width:r,...p||{marginLeft:`${-parseInt(r?.toString()||"")/2+12}px`},children:g(wt,{height:"auto",padding:a,lineHeight:1.3,whiteSpace:h,color:u?"black":void 0,backgroundColor:u?"white":void 0,border:u?`1px solid ${Ae(.92,l.black)}`:void 0,textAlign:"center",children:[e,i(vt,{ref:k,top:"100%",left:"50%",...c})]})})}):null}):null]})}var J,Ee,et=S(()=>{"use strict";J=R(D());zo();xt();U();V();Ho();j();y();Ee=or});var se,rr,ir,eo,to=S(()=>{"use strict";se=R(D());U();N();ct();oe();We();ot();je();Ve();V();tt();y();rr=()=>i(s,{background:"transparent",position:"absolute",zIndex:99,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",children:i(re,{color:"gray",bgColor:"transparent"})}),ir=({previewImage:e,onAddImage:t,color:r=l.black})=>{let[n,a]=(0,se.useState)(!1),[p,c]=(0,se.useState)(!1),[d,o]=(0,se.useState)(null),{isPending:m,isError:h}=Pe({src:d||e,onError:()=>{console.warn("Image failed to load",d)}});(0,se.useEffect)(()=>{!m&&d&&(h||t(d),o(null),c(!1))},[m,h,d,t]);let f=async k=>{if(n&&a(!1),!p){if(k&&k.size>A.UPLOAD_IMAGE_SIZE_LIMIT){window.alert(A.MSG_UPLOAD_IMAGE_SIZE_ERROR);return}if(!le.includes(k.type)){window.alert("Only PNG and JPEG formats are supported.");return}c(!0);try{let I=await Ce("template-submission-cover",k),C=I.picture?.lambdaUrl||I.picture.url;C?o(C):window.alert("Loading image failed")}catch(I){console.error(I)}finally{c(!1)}}},x=e||d;return g(s,{width:"100%",height:"100%",userSelect:"none",onDragEnter:()=>{n||a(!0)},onDragLeaveCapture:()=>{n&&a(!1)},opacity:n?.5:1,position:"relative",children:[p&&i(rr,{}),x?i(s,{width:"100%",height:"100%",userSelect:"none",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:`url(${x})`,backgroundSize:"cover",backgroundPosition:"top",backgroundRepeat:"no-repeat",position:"relative",borderTopRightRadius:8,borderBottomRightRadius:8,children:i(Re,{id:"template-submission-replace-cover",onUpload:f,disabled:p})}):i(Te,{id:"template-submission-upload-cover",accept:le.join(","),dropFile:!0,readFileData:!1,disabled:p,onChange:f,children:i(s,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",userSelect:"none",children:!p&&g(O,{children:[i(P,{fontWeight:100,fontSize:50,lineHeight:1.42,color:r,children:"+"}),i(P,{textStyle:"regular",lineHeight:1.75,color:r,children:"Upload your template preview"}),i(P,{textStyle:"small",color:r,children:"Recommended size: 1920 \xD7 1264"})]})})})]})},eo=ir});var pe,oo,nr,ro,io=S(()=>{"use strict";pe=R(D());Qe();U();N();V();y();oo="Template name",nr=(e,t)=>{let r=(0,pe.useRef)(null),[n,a]=(0,pe.useState)(0);return(0,pe.useEffect)(()=>{if(r.current){let p=r.current.offsetWidth;a(p)}},[]),g(s,{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",children:[i(q,{...e,name:"template-title-in-templates",placeholder:oo,maxLength:20,rows:1,textStyle:"subheading",height:30}),!e.value&&i(s,{position:"absolute",left:n+6,top:7,right:-25,children:i(P,{textStyle:"small",color:t?l.red:l.gray,children:"(max. 20 symbols)"})}),i(s,{position:"absolute",visibility:"hidden",pointerEvents:"none",height:0,overflow:"hidden",children:i(P,{ref:r,textStyle:"subheading",children:oo})})]})},ro=nr});var $,no,Ue=S(()=>{"use strict";ht();Qe();$o();U();N();Yt();Qt();et();to();io();y();$={templateName:{initialValue:"",required:!0,componentType:"textarea",formatter:e=>e.trim(),component:ro,removelineBreaks:!0},creatorName:{initialValue:"",required:!0,componentType:"textarea",formatter:e=>e.trim(),component:e=>i(q,{...e,name:"creator-name-in-templates",placeholder:"Creator's name",maxLength:30,rows:1,textStyle:"small"}),removelineBreaks:!0},portfolioLink:{initialValue:"",required:!0,validate:e=>!!Ne(e),errorMessage:"Add a valid link to Portfolio link field.",formatter:e=>Ne(e),componentType:"input",component:e=>i(He,{...e,name:"portfolio-link-in-templates",placeholder:"Portfolio link",maxLength:500,textStyle:"small"}),trim:!0,removelineBreaks:!0},contactLink:{initialValue:"",required:!0,validate:e=>!!$e(e),errorMessage:"Add a valid email to Contact email field.",formatter:e=>$e(e),componentType:"textarea",component:e=>i(q,{...e,name:"contact-link-in-templates",placeholder:"Contact email",maxLength:100,rows:1,textStyle:"small"}),trim:!0,removelineBreaks:!0},templateDescription:{initialValue:"",required:!0,componentType:"textarea",formatter:e=>e.trim(),component:e=>i(q,{...e,name:"description-in-templates",placeholder:"Template description (max. 200 symbols)",maxLength:200,rows:7,textStyle:"small"})},selectedTags:{initialValue:[],required:!0,validate:(e,t)=>e.length>0&&(!t.customTags||!!t.customTags&&e.length>0),errorMessage:"Select a primary tag along with your custom tag.",componentType:"tags",component:e=>i(Xt,{...e})},customTags:{initialValue:"",componentType:"textarea",formatter:e=>e.trim(),component:e=>i(q,{...e,name:"custom-tag-in-templates",placeholder:"Custom tag (optional)",maxLength:100,rows:1,textStyle:"small"}),removelineBreaks:!0},isPaid:{initialValue:!1,componentType:"toggle",component:e=>i(Jt,{...e}),toggleConfig:{toggleValues:[{label:"Free",value:"free"},{label:"Paid",value:"paid"}],toggleTrueValue:"paid"}},price:{initialValue:"",required:({isPaid:e})=>e,validate:(e,t)=>{if(!t.isPaid)return!0;let r=Ke(e);return!!(r&&r>1&&r<1e4)},errorMessage:"Set a price higher than $1 and less than $10000.",formatter:e=>Ke(e),componentType:"textarea",component:e=>g(s,{display:"flex",flexDirection:"row",gap:8,children:[i(P,{textStyle:"small",children:"$"}),i(q,{...e,name:"price-in-templates",placeholder:"Price",maxLength:7,rows:1,textStyle:"small"})]}),trim:!0,twoDecimals:!0,removelineBreaks:!0},purchaseLink:{initialValue:"",required:({isPaid:e})=>e,validate:(e,t)=>t.isPaid?!!Oe(e):!0,errorMessage:"Add a valid link\u2014Shopify, Gumroad or Lemonsqeezy one\u2014to Purchase Link field.",formatter:e=>Oe(e),componentType:"input",component:e=>g(s,{display:"flex",width:"100%",justifyContent:"space-between",children:[i(He,{...e,name:"purchase-link-in-templates",placeholder:"Purchase link",maxLength:500,textStyle:"small"}),i(Ee,{width:210,triggerSize:16,boxPosition:{marginLeft:"-190px"},arrowPosition:{left:"auto",right:4},text:"Add a link to an external marketplace (e.g. Lemon Squeezy, Gumroad, Shopify) where this template will be available for purchase."})]}),trim:!0,removelineBreaks:!0},previewImages:{initialValue:{},required:!0,validate:e=>!!e.cover?.default,componentType:"image",component:e=>i(eo,{...e})}},no=e=>{let t={};return Object.keys($).forEach(r=>{let n=$[r],a=e[r],p=n.formatter?.(a)??a;t[r]=p===!1?a:p}),t}});var Q,ar,ao,so,lo=S(()=>{"use strict";Q=R(D());Ue();ar=e=>Object.keys($).every(t=>{let r=$[t],n=e[t];return(typeof r.required=="function"?r.required(e):r.required)?r.validate?r.validate(n,e):Array.isArray(n)?n.length>0:typeof n=="object"&&n!==null?Object.keys(n).length>0:!!n:!0}),ao=e=>{let[t,r]=(0,Q.useState)(e),[n,a]=(0,Q.useState)([]),[p,c]=(0,Q.useState)(""),d=(0,Q.useCallback)((h,f)=>{r(x=>({...x,[h]:f}))},[]),o=(0,Q.useCallback)((h=[],f={})=>{let x=n;c("");let k="";return(h.length>0?h:Object.keys($)).forEach(C=>{x=x.filter(F=>F!==C);let b=$[C],u=f[C]??t[C];if(!(typeof b.required=="function"?b.required(t):b.required))return;if(!(Array.isArray(u)?u.length>0:!!u)){x.push(C);return}(b.validate?b.validate(u,t):!0)||(x.push(C),$[C].errorMessage&&(k=$[C].errorMessage||""))}),a(x),k&&c(k),x.length===0},[t,n]),m=ar(t);return{form:t,setForm:r,updateField:d,validateForm:o,errors:n,setErrors:a,isFormFilled:m,errorMessage:p}},so=()=>Object.fromEntries(Object.entries($).map(([e,t])=>[e,t.initialValue]))});var Vn,Nn,On,$n,Kn,Hn,jn,po,mo=S(()=>{"use strict";oe();Vn=e=>e.is_published?e.changed?"unpublishedChanges":"sameAsPublished":"unpublished",Nn=(e,t=!1)=>{let r=A.readymag_viewer_host,n=r.split("//")[1],a=e.domain,p=e.user.domain,c=t?`${r.split("//")[0]}//`:"",d=a||p||`${n}/${e.user.uri}`;return c+d},On=e=>{let t=A.readymag_viewer_host;return e.domain?e.domain:`${t}/${e.uri}`},$n=e=>/[^\x00-\x7f]/.test(e)?e.replace(/[^\x00-\x7f]/g,""):e,Kn=e=>/\s/.test(e)?e.replace(/\s/g,""):e,Hn=e=>{let t=e.trim();return t=t.replace(/^\/\//,""),t=t.replace(/^[A-Za-z]+?:\/\//,""),t=t.replace(/\/.*$/,""),t=t.replace(/:\d*$/,""),t=t.replace(/^.*?@/,""),t=t.trim(),t},jn=e=>{let t="",r="",n="";return e&&(e.arecord&&(t="A-record",r=e.usedArecord||r,n=e.validArecord||n),e.cname&&(t="CNAME-record",r=e.usedCname||r,n=e.validCname&&e.validCname+"."||n)),{domain:e.domain,subdomain:e.subdomain,recordType:t,currentValue:r,neededValue:n}},po=(e,t="")=>e.replace(/(\r?\n|\r)+/g,t)});var co,uo=S(()=>{"use strict";j();N();Ue();mo();V();y();co=(e,{form:t,errors:r,setErrors:n,updateField:a,validate:p,onBlur:c,onAddImage:d})=>{let{key:o,disabled:m=!1}=e,h=$[o],f=r.includes(o),x=t[o];if(!h.component)return null;let k={key:o,translate:"no",spellCheck:!1,value:x,color:f?l.red:l.black,disabled:m,onBlur:()=>{p([o]),c()}},I=b=>{n(r.filter(L=>L!==o));let u=String(b);if(h.removelineBreaks&&(u=po(u)),h.trim?u=u.trim():(u.trim()===""&&(u=""),u=u.replace(/^\s+/,"")),h.twoDecimals){u=u.replace(",","."),u=u.replace(/[^0-9.]/g,"");let L=u.split(".");L.length>2&&(u=L[0]+"."+L.slice(1).join("").replace(/\./g,""));let[T,v]=u.split(".");v!==void 0&&(u=T+"."+v.slice(0,2))}a(o,u)},C=f?`
    ::placeholder {
      color: ${l.red};
    }
  `:"";switch(h.componentType){case"textarea":{let b={...k,autoSize:!0,onChange:u=>I(u.currentTarget.value),css:B`
          ${C}
        `};return h.component(b,f)}case"input":{let b={...k,border:"none !important",padding:0,onChange:u=>I(u.currentTarget.value),css:B`
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          resize: none;
          &:disabled {
            color: ${f?l.red:l.black};
            -webkit-text-fill-color: ${f?l.red:l.black};
            opacity: 1;
          }
          ${C}
        `};return h.component(b,f)}case"tags":{let b={color:f?l.red:l.darkGray,selectedTags:x,onChange:u=>{a(o,u),p([o],{[o]:u})}};return h.component(b,f)}case"toggle":{let b=h.toggleConfig,{toggleValues:u,toggleTrueValue:L}=b,T=x?L:u.find(F=>F.value!==L)?.value||void 0,v={width:168,height:24,selected:T,values:u.map(F=>F.value),captions:u.map(F=>i(P,{textStyle:"small",color:F.value===T?l.blue:l.black,userSelect:"none",children:F.label},F.value)),onChange:F=>{a(o,F===L)},bgColor:l.lightGray,hoverColor:`${l.lightGray}B3`,activeHoverColor:"#CCE6FFB3",activeColor:"#CCE6FF"};return h.component(v,f)}case"image":{let b={previewImage:x.cover?.default??null,onAddImage:u=>d({imageStr:u,key:"cover"}),color:k.color};return h.component(b,f)}default:return null}}});var he,sr,go,fo=S(()=>{"use strict";he=R(D());V();N();U();j();uo();et();oe();y();sr=({form:e,errors:t,setErrors:r,updateField:n,onBlur:a,isCreatorProfileDisabled:p,validate:c,onAddImage:d})=>{let o=m=>co(m,{form:e,errors:t,setErrors:r,updateField:n,validate:c,onAddImage:d,onBlur:a});return(0,he.useEffect)(()=>{e.isPaid||r(t.filter(m=>m!=="price"&&m!=="purchaseLink"))},[e.isPaid,r]),g(s,{display:"flex",border:`1px solid ${xe.transparentGrey}`,borderRadius:8,minWidth:1150,width:"100%",aspectRatio:1422/672,maxWidth:1333,children:[g(s,{width:"28%",padding:32,backgroundColor:"white",outline:"1px solid white",borderTopLeftRadius:8,borderBottomLeftRadius:8,flexShrink:0,children:[i(s,{paddingLeft:8,paddingTop:7,position:"relative",children:o({key:"templateName"})}),g(s,{gap:4,paddingLeft:8,display:"flex",flexDirection:"column",children:[i(s,{gap:3,display:"flex",flexDirection:"column",children:p?g(O,{children:[i(ue,{textStyle:"small",color:l.black,children:e.creatorName}),g(s,{display:"flex",width:"100%",justifyContent:"space-between",children:[i(W,{tabIndex:-1,textStyle:"small",color:l.black,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",href:e.portfolioLink,target:"_blank",children:e.portfolioLink}),i(Ee,{width:145,triggerSize:16,boxPosition:{marginLeft:"-125px"},arrowPosition:{left:"auto",right:4},text:g(ue,{textStyle:"small",children:["To change personal information ",i(W,{color:"white",textDecoration:"underline",href:`mailto:${A.SUPPORT_MAIL}`,css:B`
                            &:hover {
                              color: ${l.lightGray};
                              text-decoration: none;
                            }
                          `,children:"contact Readymag support."})]})})]}),i(W,{tabIndex:-1,textStyle:"small",color:l.black,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",href:`mailto:${e.contactLink}`,children:e.contactLink})]}):i(O,{children:["creatorName","portfolioLink","contactLink"].map(m=>i(he.Fragment,{children:o({key:m})},m))})}),i(s,{paddingTop:4,position:"relative",children:o({key:"templateDescription"})})]}),o({key:"selectedTags"}),i(s,{paddingLeft:8,paddingTop:16,paddingBottom:32,children:o({key:"customTags"})}),o({key:"isPaid"}),e.isPaid&&i(s,{display:"flex",paddingLeft:8,paddingTop:16,gap:14,flexDirection:"column",children:["price","purchaseLink"].map(m=>i(he.Fragment,{children:o({key:m})},m))})]}),o({key:"previewImages"})]})},go=sr});var lr,ho,yo=S(()=>{"use strict";U();Ze();Fe();N();V();y();lr=({data:e,previewImages:t,onAddImage:r,isLoadingDefault:n,isLoadingMobile:a,onReset:p})=>{let c=e.viewport_phone_portrait?.enabled?"phone_portrait":void 0,d=_t(t,e._id);return g(s,{display:"flex",flexDirection:"column",children:[g(s,{display:"flex",flexDirection:"row",gap:8,children:[i(rt,{borderRadius:8,imageSize:"large_plus",desktopUrl:d?.default||e.screenshot,viewport:"default",replacePreviewButton:{id:`template-submission-upload-cover-${e._id}-default`,onUpload:o=>r({fileSrc:o,key:e._id,viewport:"default"}),showReset:!!d?.default,onReset:()=>p("default")},cropTop:!0,skipSuffixCheck:!!d?.default,isLoading:n}),c&&i(rt,{borderRadius:8,imageSize:"large_plus",phonePortraitUrl:d?.phone_portrait||e.viewport_phone_portrait?.screenshot,phoneViewportEnabled:e.viewport_phone_portrait?.enabled,viewport:c,replacePreviewButton:{id:`template-submission-upload-cover-${e._id}-${c}`,onUpload:o=>r({fileSrc:o,key:e._id,viewport:c}),showReset:!!d?.phone_portrait,onReset:()=>p("phone_portrait")},cropTop:!0,skipSuffixCheck:c==="phone_portrait"&&!!d?.phone_portrait,isLoading:a})]}),i(s,{paddingTop:8,children:i(P,{textStyle:"small",color:l.gray,children:`Page ${e.num}`})})]})},ho=lr});var pr,xo,To=S(()=>{"use strict";U();N();yo();y();pr=({pagesTree:e,previewImages:t,onAddImage:r,loadingImages:n,onReset:a})=>g(s,{padding:"8px 0",width:"100%",maxWidth:1333,children:[i(s,{padding:"40px 0 20px 0",children:i(P,{textStyle:"subheading",children:"Pages"})}),i(s,{display:"flex",flexWrap:"wrap",columnGap:8,rowGap:"16px",paddingBottom:20,children:e.map((p,c)=>i(ho,{data:p,previewImages:t,onAddImage:r,isLoadingDefault:n.includes(`${p._id}_default`),isLoadingMobile:n.includes(`${p._id}_phone_portrait`),onReset:d=>a(p._id,d)},c))})]}),xo=pr});var mr,dr,bo,wo=S(()=>{"use strict";j();U();Tt();N();Ye();Ve();V();oe();y();mr=({setShowHint:e})=>i(s,{width:32,height:32,color:l.blue,transform:"rotate(45deg)",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:7,right:21,onClick:()=>e(!1),cursor:"pointer",css:B`
      &:hover {
        opacity: 0.7;
      }
    `,children:i(P,{fontSize:28,fontWeight:200,marginLeft:1,marginBottom:5,children:"+"})}),dr=({onExit:e,showHint:t,setShowHint:r,onSubmit:n,isLoading:a,isFormFilled:p})=>g(s,{padding:"16px 40px",display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:`1px solid ${xe.transparentGrey}`,backgroundColor:l.lightGray,position:"fixed",height:80,bottom:0,width:"100vw",zIndex:999,children:[i(ve,{color:l.darkGray,textStyle:"regular",onClick:e,children:"Cancel"}),t&&g(s,{flexGrow:1,display:"flex",justifyContent:"flex-end",paddingInline:16,position:"relative",children:[i(mr,{setShowHint:r}),i(s,{display:"flex",width:428,height:48,border:`1px solid ${l.blue}`,borderRadius:8,padding:"7px 15px",children:g(P,{textStyle:"small",color:l.blue,paddingRight:23,children:["Design and description can't be changed after submission. Reach out to ",i(W,{color:l.blue,textDecoration:"underline",href:`mailto:${A.SUPPORT_MAIL}`,children:"Readymag support"})," to request changes."]})})]}),i(Ie,{onClick:n,disabled:a,backgroundColor:p?l.blue:l.darkGray,minWidth:78,children:a?i(s,{display:"flex",justifyContent:"center",marginTop:-5,children:i(re,{bgColor:"transparent"})}):i(O,{children:"Submit"})})]}),bo=dr});var it,cr,vo,Po=S(()=>{"use strict";U();N();j();V();y();it=({text:e,href:t})=>i(s,{as:"a",href:t,target:"_blank",backgroundColor:"white",color:l.black,padding:"3px 8px",display:"flex",alignItems:"center",height:24,borderRadius:8,cursor:"pointer",textDecoration:"none",css:B`
        &:hover {
          opacity: 0.7;
        }
      `,children:i(P,{textStyle:"small",children:e})}),cr=()=>g(s,{display:"flex",alignItems:"left",width:"100%",maxWidth:1333,flexDirection:"column",paddingBottom:40,children:[i(P,{textStyle:"subheading",color:l.black,children:"Things to check before submitting"}),g(s,{paddingTop:24,display:"flex",gap:4,children:[i(it,{text:"Template requirements",href:"https://help.readymag.com/hc/en-us/articles/37197706249627-Templates-Requirements"}),i(it,{text:"Selling guide",href:"https://help.readymag.com/hc/en-us/articles/38187461081755-How-to-Sell-Your-Templates"}),i(it,{text:"Submission guide",href:"https://help.readymag.com/hc/en-us/articles/37197772068507-Submitting-templates"})]})]}),vo=cr});var M,Me,ur,gr,le,fr,ps,tt=S(()=>{"use strict";M=R(D());Vo();U();V();N();j();Lt();Oo();Bt();Ut();We();oe();Ze();Ot();lo();Ue();fo();To();wo();Po();Uo();ht();y();Me="unsavedTemplateSubmission_",ur=2e3,gr=30,le=["image/png","image/jpeg"],fr=({onExit:e,onSubmit:t,showHint:r,setShowHint:n})=>{let a=(0,M.useContext)(yt),p=(0,M.useContext)(Se),c=p.user?.creatorProfiles?.[0],d=so(),{form:o,updateField:m,setForm:h,isFormFilled:f,errors:x,setErrors:k,validateForm:I,errorMessage:C}=ao({...d,creatorName:c?.creatorName||d.creatorName,portfolioLink:c?.portfolioLink||d.portfolioLink,contactLink:c?.contactLink||d.contactLink}),[b,u]=(0,M.useState)(!1),[L,T]=(0,M.useState)(!1),[v,F]=(0,M.useState)(""),[G,de]=(0,M.useState)(),[ee,X]=(0,M.useState)([]);(0,M.useEffect)(()=>{F(C)},[C]),(0,M.useEffect)(()=>{let w=Vt(`${Me}${a.project.num_id}`);h(E=>({...E,...w,...c?{creatorName:c.creatorName||"",portfolioLink:c.portfolioLink||"",contactLink:c.contactLink||""}:{creatorName:w.creatorName||"",portfolioLink:w.portfolioLink||"",contactLink:w.contactLink||""}}))},[c,a.project.num_id,h]),(0,M.useEffect)(()=>{qe(`${Me}${a.project.num_id}`,o)},[o.selectedTags,o.previewImages,o.isPaid,a.project.num_id]);let ce=(0,M.useCallback)(()=>{qe(`${Me}${a.project.num_id}`,o)},[o,a.project.num_id]),te=async({fileSrc:w,key:E,imageStr:K,viewport:z})=>{if(E==="cover")m("previewImages",{...o.previewImages,cover:{default:K}}),k(x.filter(_=>_!=="previewImages"));else{if(!w)return;try{X([...ee,`${E}_${z}`]);let _=await Ce("template-submission-cover",w),ye=_.picture?.lambdaUrl?_.picture.lambdaUrl:_.picture.url;if(!ye||!z){window.alert("Loading image failed");return}let Eo=zt(o.previewImages,E,z,ye);m("previewImages",Eo)}catch(_){console.error(_)}finally{X(ee.filter(_=>_!==`${E}_${z}`))}}},ko=(w,E)=>{let K=(o.previewImages.pages||[]).map(z=>{if(z.page===w||z.copiedPageId===w){let _={...z.previews};return delete _[E],{...z,previews:_}}return z});m("previewImages",{...o.previewImages,pages:K})},Io=()=>{G&&t(G)},De=(0,M.useCallback)(async(w,E=0)=>{if(E>=gr)throw new Error("Submission processing timeout");await new Promise(z=>setTimeout(z,ur));let K=await a.getSubmissionStatus(w);return K==="processing"?De(w,E+1):K},[a]),at=w=>{let E=[];for(let K of w)E.push(K),K.children&&(E=[...E,...at(K.children)]);return E},ze=at(a.pagesTree),Lo=(0,M.useCallback)(async()=>{if(!I()){o.customTags&&o.selectedTags.length===0&&F($.selectedTags.errorMessage||v);return}T(!0);let w=no(o);try{if(!c){let ye=await a.sendCreatorProfile({creatorName:w.creatorName,...w.portfolioLink&&{portfolioLink:w.portfolioLink},...w.contactLink&&{contactLink:w.contactLink}});p.updateUser({creatorProfiles:ye?.data})}let E=Dt(w.previewImages,ze),{submissionId:K,status:z}=await a.sendTemplateSubmission({primaryTags:w.selectedTags,...w.customTags&&{customTags:w.customTags},isPaid:w.isPaid,previewImages:E,templateName:w.templateName,templateDescription:w.templateDescription,...w.price&&{price:w.price},...w.purchaseLink&&{purchaseLink:w.purchaseLink}}),_=z;z==="processing"&&(_=await De(K)),de(_),T(!1),u(!0),At(`${Me}${a.project.num_id}`),_e("submitTemplateForm",{submittedSuccessfully:!0,paid:w.isPaid,templatePrice:w.price,purchaseLinkService:ft(w.purchaseLink),templateName:w.templateName})}catch(E){console.error("Error submitting tempate",E),F(g(O,{children:["Something's off. Please try again or contact ",i(W,{color:"white",textDecoration:"underline",href:`mailto:${A.SUPPORT_MAIL}`,css:B`
              &:hover {
                color: ${l.lightGray};
                text-decoration: none;
              }
            `,children:"Readymag support."})]})),T(!1),_e("submitTemplateForm",{submittedSuccessfully:!1,error:E.message})}},[o,I,c,De,a,ze,v]),{callback:Bo}=ut(Lo,500);return g(It,{children:[i(Rt,{open:!!v,message:v,onClose:()=>F("")}),b?i(Nt,{onExit:Io}):g(O,{children:[g(s,{display:"flex",height:"100vh",flexDirection:"column",backgroundColor:l.lightGray,padding:40,alignItems:"center",minWidth:1230,children:[i(vo,{}),i(go,{form:o,errors:x,setErrors:k,updateField:m,onBlur:ce,isCreatorProfileDisabled:!!c,validate:I,onAddImage:te}),i(xo,{pagesTree:ze,previewImages:o.previewImages,onAddImage:te,loadingImages:ee,onReset:ko}),i(s,{display:"flex",alignItems:"left",width:"100%",maxWidth:1333,paddingBottom:105,children:g(P,{color:l.gray,textStyle:"small",children:["By submitting templates you agree to ",i(W,{color:l.gray,textDecoration:"underline",href:"https://readymag.com/readymag/terms-and-privacy/",target:"_blank",children:"our Terms and Conditions"})]})})]}),i(bo,{onExit:e,showHint:r,setShowHint:n,onSubmit:Bo,isLoading:L,isFormFilled:f})]})]})},ps=fr});var So,Re,ot=S(()=>{"use strict";So=R(D());U();ct();N();j();oe();V();tt();y();Re=({onUpload:e,id:t,disabled:r,showReset:n=!1,onReset:a})=>{let[p,c]=(0,So.useState)(!1),d=async o=>{if(!p){if(o&&o.size>A.UPLOAD_IMAGE_SIZE_LIMIT){window.alert(A.MSG_UPLOAD_IMAGE_SIZE_ERROR);return}if(!le.includes(o.type)){window.alert("Only PNG and JPEG formats are supported.");return}c(!0);try{await e(o)}catch(m){console.error(m)}finally{c(!1)}}};return g(s,{position:"absolute",bottom:8,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:4,justifyContent:"center",children:[i(s,{backgroundColor:l.darkGray,width:110,height:24,borderRadius:8,css:B`
          &:hover {
            opacity: 0.7;
          }
        `,children:i(s,{display:"flex",justifyContent:"center",alignItems:"center",children:i(Te,{id:t,accept:le.join(","),readFileData:!1,disabled:p||r,onChange:d,children:i(P,{color:"white",textStyle:"small",children:"Replace preview"})})})}),n&&a&&i(s,{backgroundColor:l.darkGray,width:110,height:24,borderRadius:8,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",onClick:a,css:B`
            &:hover {
              opacity: 0.7;
            }
          `,children:i(P,{color:"white",textStyle:"small",children:"Reset to default"})})]})}});var Z,hr,me,rt,Fe=S(()=>{"use strict";Z=R(D());U();Ao();Ve();je();Xe();ot();y();hr=()=>i(s,{background:"transparent",position:"absolute",zIndex:99,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",children:i(re,{color:"gray",bgColor:"transparent"})}),me={small:{width:88,height:58},standard:{width:192,height:126},large:{width:420,height:276},large_plus:{width:439,height:289},mobile:{width:288,height:189},phone_portrait:{small:{width:33,height:58},standard:{width:71,height:126},large:{width:155,height:276},large_plus:{width:158,height:280},mobile:{width:288,height:511}},tablet_portrait:{small:{width:48,height:58},standard:{width:104,height:126},large:{width:229,height:276},large_plus:{width:232,height:280},mobile:{width:288,height:347}}},rt=({desktopUrl:e,phonePortraitUrl:t,tabletPortraitUrl:r,phoneViewportEnabled:n,tabletViewportEnabled:a,opacity:p,blur:c=!1,viewport:d="default",imageSize:o="standard",customBox:m,borderRadius:h=4,cropTop:f=!1,replacePreviewButton:x,skipSuffixCheck:k,onLoadError:I,isLoading:C=!1})=>{let[b,u]=(0,Z.useState)(void 0),[L,T]=(0,Z.useState)(!1);(0,Z.useEffect)(()=>{T(!1)},[d]);let v=d==="phone_portrait"&&n,F=d==="tablet_portrait"&&a,G=(0,Z.useMemo)(()=>{let te=v?t:F?r:e;return te?k?te:ke({screenshotUrl:te,usePhoneScreenshot:v,useTabletScreenshot:F,viewport:d,imageSize:o}):null},[e,t,r,v,F,k,o,d]),{width:de,height:ee}=(0,Z.useMemo)(()=>d==="default"?me[o]:o==="mobile"?me[d||"phone_portrait"][o]:Co(F?"tablet_portrait":v?"phone_portrait":"default",me[o]),[o,v,F,d]),{isPending:X,isError:ce}=Pe({src:G,onError:I});return(0,Z.useEffect)(()=>{if(ce){u(void 0);return}!X&&!ce&&G&&u(G)},[X,ce,G]),g(s,{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",children:[(X||C)&&i(hr,{}),i(s,{backgroundColor:"white",opacity:.5,borderRadius:`${h}px`,...m?{...m}:{width:de,height:ee}}),i(dt,{...m?{...m}:{width:de,height:ee},margin:"auto",borderRadius:`${h}px`,opacity:p!==void 0?p:1,filter:`blur(${c?"1px":0})`,display:!L||!b?"none":"block",onLoad:()=>T(!0),src:b,position:"absolute",top:0,left:0,...f&&{objectFit:"cover",objectPosition:"top"}}),x&&i(Re,{id:x.id,onUpload:x.onUpload,disabled:x.disabled,showReset:!X&&!C?x.showReset:!1,onReset:x.onReset})]})}});function yr(e,t){let r=e.split(".");return r.length>1?(r[r.length-2]+="_"+t,r.join(".")):e+"_"+t}function Us(e){let t=e.split(".");if(t.length>1){let r=t[t.length-2].split("_");if(r.length>1&&!isNaN(Number(r[r.length-1]))){r.pop();let n=r.join("_");return t[t.length-2]=n,t.join(".")}}return e}function xr(e){let t=e.split("."),r;return t.length>1&&(r=t[t.length-2].split("_")),r&&Array.isArray(r)&&r.length>1?r=r[r.length-1]:r=void 0,r}function Ms(e,t="default"){let r=e*(window.devicePixelRatio>1?2:1),n=Object.values(nt[t])||[];return n.indexOf(r)===-1&&(r=n.filter(a=>a>r)[0]),n.indexOf(r)===-1?(console.error("Unknown screenshot size",e,"for viewport",t),Fo):r}function br(e,t="default"){return nt[t]?.[e]||Fo}var Fo,nt,Tr,ke,wr,Co,Xe=S(()=>{"use strict";Do();Fe();Fo=512,nt={default:{quarter:256,halfCover:608,half:512,cover:608,full:1024},phone_portrait:{half:160,full:320},tablet_portrait:{quarter:192,half:384,full:768}};Tr=(e,t="default")=>{let r=nt[t],n=Object.entries(r).map(([a,p])=>[a,p]).sort((a,p)=>a[1]-p[1]);for(let[a,p]of n)if(p>=e)return a;return n[n.length-1][0]},ke=e=>{let t=xr(e.screenshotUrl),r=e.viewport==="default"?me[e.imageSize]:me[e.viewport]?.[e.imageSize];if(!t||Number.isNaN(Number(t))){let n=e.usePhoneScreenshot?"phone_portrait":e.useTabletScreenshot?"tablet_portrait":"default",a=Tr(r.width*2,n),p=br(a,n);return yr(e.screenshotUrl,p)}return e.screenshotUrl};wr={default:{width:1024,height:672},phone_portrait:{width:320,height:568},tablet_portrait:{width:768,height:926}},Co=(e,t)=>{let r=wr[e||"default"],n=t?lt.getScaleToFit(r,t):1;return{width:r.width*n,height:r.height*n}}});export{St as a,Ct as b,Ge as c,Cr as d,Ft as e,Se as f,Dr as g,zr as h,Bt as i,Wr as j,Ce as k,We as l,q as m,Qe as n,Y as o,bi as p,wi as q,qt as r,vi as s,Pi as t,Zt as u,Jt as v,Qt as w,Ee as x,et as y,Vn as z,Nn as A,On as B,$n as C,Kn as D,Hn as E,jn as F,po as G,mo as H,ps as I,tt as J,me as K,rt as L,Fe as M,yr as N,Us as O,xr as P,Ms as Q,br as R,wr as S,Co as T,Xe as U};
